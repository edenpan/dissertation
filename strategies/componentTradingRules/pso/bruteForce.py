# coding: utf-8
from numpy import *
import random
from math import sin, sqrt
from backtest import runbackTest
import sys
sys.path.append('../')
import utils
import copy
import importlib

class Bruteforce:
	def setStockData(self, code, isTrain):
		self.stockData = utils.getStockDataTrain(code, isTrain)

	def setStockDataTime(self, code, start, end):
		self.stockData = utils.getStockDataWithTime(code, start, end)
	
	def setStrategy(self, strategyName, params=None):
		module = importlib.import_module(strategyName)
		class_ = getattr(module, strategyName)
		strategy = class_()
		self.strategyName = strategy.strategyName
		self.strategy = strategy
		if params is None:
			self.searchParams = strategy.defaultParam()
		else:
			# self.searchParams = strategy.parseparams(params)
			self.searchParams = params
		self.dimensions = len(self.searchParams)

	def run(self):
		bStratRes, bBstRes = runbackTest(self.stockData, self.strategy, **self.searchParams)
		return bStratRes, bBstRes


# run one strategy to get the best performance with brust Force
def brustForceOne():
	bf = Bruteforce()
	bf.setStockDataTime("2018", '2013-07-13', '2016-12-12')
	strategyList = ['MovingAverage', 'OnBalanceVolAve', 'RelativeStrengthIndex', 'MacdHistogram' ,'tradingRangeBreakout','BollingerBandsStrategy']
	# strategyList = ['tradingRangeBreakout','BollingerBandsStrategy']
	for strategyName in strategyList:
		print strategyName
		import time
		start = time.time()
		print start
		bf.setStrategy(strategyName)
		bStratRes, bBstRes = bf.run()
		# print bStratRes
		print bBstRes
		end = time.time()
		escape = end - start
		print escape


def ususallSeen():
	bf = Bruteforce()	
	allStrategy = ['MovingAverage', 'BollingerBandsStrategy', 'MacdHistogram', 'RelativeStrengthIndex', 'OnBalanceVolAve', 'tradingRangeBreakout','StochasticOscillator']	
	# allHsiCode = ['5', '11', '23', '388', '939', '1299', '1398', '2318', '2388', '2628', '3328', '3988', \
	# '2', '3', '6', '836', '1038', '12', '16', '17', '83', '101', '688', '823', '1109', '1113',  '2007', \
	# '1', '19', '27', '66', '144', '151', '175', '267', '288', '386', '700', '762', '857', '883', '941', '992', \
	# '1044', '1088', '1928', '2018', '2319', '2382']
	allHsiCode = ['2018']
	# strategyParams = {'MovingAverage':{'ns':[10], 'nl': [50]}, 'MacdHistogram': {'ns':[12], 'nl':[26], 'time':[9]}, 'BollingerBandsStrategy':{'n':[20],'k':[2]}, \
	# 'RelativeStrengthIndex': {'n':[14], 'ob':[70], 'os': [30]}, 'tradingRangeBreakout': {'n':[30]}, 'StochasticOscillator':{'n':[14], 'm':[3], 'ob':[80], 'os':[20]}, \
	# 'OnBalanceVolAve': {'nl':[65], 'ns': [20]}, 'MovingMomentum': {'hns':[12], 'hnl':[26], 'htime':[9], 'snl':[150], 'sns':[20], 'sto_n':[14], 'sto_m':[3], 'sto_ob':[80], 'sto_os':[20]}}	
	# strategyParams = {'MovingAverage':{'ns':[175], 'nl': [210]}, 'MacdHistogram': {'ns':[8], 'nl':[24], 'time':[8]}, 'BollingerBandsStrategy':{'n':[85],'k':[1.7]}, \
	# 'RelativeStrengthIndex': {'n':[27], 'ob':[70], 'os': [30]}, 'tradingRangeBreakout': {'n':[91]}, 'StochasticOscillator':{'n':[12], 'm':[6], 'ob':[87], 'os':[28]}, \
	# 'OnBalanceVolAve': {'nl':[65], 'ns': [6]}, 'MovingMomentum': {'hns':[12], 'hnl':[26], 'htime':[9], 'snl':[150], 'sns':[20], 'sto_n':[14], 'sto_m':[3], 'sto_ob':[80], 'sto_os':[20]}}	
	strategyParams = {'MovingAverage':{'ns':[175], 'nl': [215]}, 'MacdHistogram': {'ns':[8], 'nl':[32], 'time':[8]}, 'BollingerBandsStrategy':{'n':[31],'k':[1.9]}, \
	'RelativeStrengthIndex': {'n':[27], 'ob':[78], 'os': [17]}, 'tradingRangeBreakout': {'n':[91]}, 'StochasticOscillator':{'n':[70], 'm':[9], 'ob':[93], 'os':[13]}, \
	'OnBalanceVolAve': {'nl':[40], 'ns': [5]}, 'MovingMomentum': {'hns':[12], 'hnl':[26], 'htime':[9], 'snl':[150], 'sns':[20], 'sto_n':[14], 'sto_m':[3], 'sto_ob':[80], 'sto_os':[20]}}	
	codeName = {'5': 'HSBCHoldings', '11': 'HangSengBank', '23': 'BankofEAsia', '388': 'HKEx', '939': 'CCB', '1299': 'AIA', '1398': 'ICBC', '2318': 'PingAn', '2388': 'BOCHongKong', '2628': 'ChinaLife', '3328': 'Bankcomm', '3988': 'BankofChina', '2': 'CLPHoldings', '3': 'HK&ChinaGas', '6': 'PowerAssets', '836': 'ChinaResPower', '1038': 'CKIHoldings', '12': 'HendersonLand', '16': 'SHKPpt', '17': 'NewWorldDev', '83': 'SinoLand', '101': 'HangLungPpt', '688': 'ChinaOverseas', '823': 'LinkREIT', '1109': 'ChinaResLand', '1113': 'CKAsset', '2007': 'CountryGarden', '1': 'CKHHoldings', '19': 'SwirePacificA', '27': 'GalaxyEnt', '66': 'MTRCorporation', '144': 'ChinaMerPort', '151': 'WantWantChina', '175': 'GeelyAuto', '267': 'CITIC', '288': 'WHGroup', '386': 'SinopecCorp', '700': 'Tencent', '762': 'ChinaUnicom', '857': 'PetroChina', '883': 'CNOOC', '941': 'ChinaMobile', '992': 'LenovoGroup', '1044': 'HenganIntl', '1088': 'ChinaShenhua', '1928': 'SandsChinaLtd', '2018': 'AACTech', '2319': 'MengniuDairy', '2382': 'SunnyOptical'}
	fileObject = open('outsampleUsuallySeen', 'w+')	
	for strategy in allStrategy:
		for code in allHsiCode:
			# bf.setStockDataTime(code, '2013-07-13', '2016-12-12')
			bf.setStockDataTime(code, '2016-12-13', '2018-08-15')
			bf.setStrategy(strategy, strategyParams[strategy])
			bStratRes, bBstRes = bf.run()
			# print  bBstRes
			record = str(codeName[code]) + '\t' + str(code) + '\t' + str(strategy) + '\t'+ str(bBstRes[0]) + '\t' + str(bBstRes[1]) + '\t' + str(bBstRes[2]) + '\n'  
			fileObject.write(record)
	fileObject.close()		

def testParticularPara():
	# testList = [['MacdHistogram', '2382', {'ns': [8], 'nl': [32], 'time': [8]}], ['MacdHistogram', '175', {'ns': [8], 'nl': [36], 'time': [8]}], ['MacdHistogram', '2018', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '1928', {'ns': [8], 'nl': [24], 'time': [9]}], ['MacdHistogram', '2318', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '27', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '1109', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '2007', {'ns': [8], 'nl': [24], 'time': [9]}], ['MacdHistogram', '700', {'ns': [8], 'nl': [30], 'time': [8]}], ['OnBalanceVolAve', '2382', {'ns': [50], 'nl': [75]}], ['MacdHistogram', '388', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '2628', {'ns': [8], 'nl': [28], 'time': [8]}], ['RelativeStrengthIndex', '2382', {'os': [25], 'ob': [80], 'n': [20]}], ['MovingAverage', '2382', {'ns': [110], 'nl': [155]}], ['BollingerBandsStrategy', '175', {'k': [1.6], 'n': [160]}], ['MacdHistogram', '3328', {'ns': [8], 'nl': [30], 'time': [8]}], ['MacdHistogram', '762', {'ns': [8], 'nl': [32], 'time': [8]}], ['MacdHistogram', '267', {'ns': [8], 'nl': [28], 'time': [8]}], ['MacdHistogram', '883', {'ns': [8], 'nl': [30], 'time': [8]}], ['MacdHistogram', '688', {'ns': [9], 'nl': [24], 'time': [8]}], ['MacdHistogram', '836', {'ns': [8], 'nl': [24], 'time': [9]}], ['MacdHistogram', '386', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '2319', {'ns': [8], 'nl': [26], 'time': [8]}], ['tradingRangeBreakout', '2382', {'n': [150]}], ['MacdHistogram', '1088', {'ns': [8], 'nl': [28], 'time': [8]}], ['MacdHistogram', '83', {'ns': [8], 'nl': [30], 'time': [8]}], ['BollingerBandsStrategy', '2382', {'k': [2.1], 'n': [55]}], ['MacdHistogram', '992', {'ns': [17], 'nl': [32], 'time': [8]}], ['MacdHistogram', '939', {'ns': [8], 'nl': [28], 'time': [9]}], ['MacdHistogram', '17', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '3988', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '2388', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '12', {'ns': [8], 'nl': [26], 'time': [9]}], ['MacdHistogram', '288', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '1', {'ns': [8], 'nl': [24], 'time': [8]}], ['RelativeStrengthIndex', '175', {'os': [30], 'ob': [80], 'n': [11]}], ['MacdHistogram', '823', {'ns': [8], 'nl': [30], 'time': [8]}], ['MacdHistogram', '857', {'ns': [8], 'nl': [30], 'time': [8]}], ['StochasticOscillator', '2382', {'m': [3], 'os': [20], 'ob': [80], 'n': [12]}], ['MacdHistogram', '941', {'ns': [9], 'nl': [30], 'time': [8]}], ['tradingRangeBreakout', '175', {'n': [10]}], ['OnBalanceVolAve', '175', {'ns': [50], 'nl': [100]}], ['MacdHistogram', '1299', {'ns': [8], 'nl': [32], 'time': [8]}], ['MovingAverage', '175', {'ns': [115], 'nl': [240]}], ['MacdHistogram', '1398', {'ns': [8], 'nl': [32], 'time': [8]}], ['MacdHistogram', '23', {'ns': [8], 'nl': [30], 'time': [10]}], ['MacdHistogram', '16', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '101', {'ns': [8], 'nl': [36], 'time': [8]}], ['MacdHistogram', '144', {'ns': [8], 'nl': [32], 'time': [8]}], ['OnBalanceVolAve', '2018', {'ns': [5], 'nl': [40]}], ['tradingRangeBreakout', '700', {'n': [20]}], ['MacdHistogram', '6', {'ns': [8], 'nl': [24], 'time': [9]}], ['OnBalanceVolAve', '388', {'ns': [25], 'nl': [40]}], ['MacdHistogram', '5', {'ns': [8], 'nl': [24], 'time': [8]}], ['RelativeStrengthIndex', '700', {'os': [20], 'ob': [75], 'n': [18]}], ['BollingerBandsStrategy', '762', {'k': [2.2], 'n': [155]}], ['MacdHistogram', '151', {'ns': [8], 'nl': [32], 'time': [8]}], ['BollingerBandsStrategy', '2018', {'k': [1.9], 'n': [30]}], ['MacdHistogram', '11', {'ns': [8], 'nl': [26], 'time': [8]}], ['MacdHistogram', '66', {'ns': [8], 'nl': [36], 'time': [8]}], ['MovingAverage', '700', {'ns': [2], 'nl': [20]}], ['MacdHistogram', '1044', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '19', {'ns': [8], 'nl': [24], 'time': [8]}], ['MacdHistogram', '1038', {'ns': [9], 'nl': [24], 'time': [8]}], ['MovingAverage', '388', {'ns': [1], 'nl': [45]}], ['BollingerBandsStrategy', '700', {'k': [2.5], 'n': [120]}], ['tradingRangeBreakout', '388', {'n': [20]}], ['BollingerBandsStrategy', '883', {'k': [2.5], 'n': [125]}], ['MacdHistogram', '2', {'ns': [8], 'nl': [26], 'time': [8]}], ['tradingRangeBreakout', '2318', {'n': [20]}], ['OnBalanceVolAve', '2007', {'ns': [1], 'nl': [5]}], ['MovingAverage', '2018', {'ns': [190], 'nl': [200]}], ['MacdHistogram', '3', {'ns': [8], 'nl': [24], 'time': [9]}], ['MovingAverage', '288', {'ns': [55], 'nl': [75]}], ['OnBalanceVolAve', '2318', {'ns': [25], 'nl': [50]}], ['MovingAverage', '2318', {'ns': [7], 'nl': [20]}], ['OnBalanceVolAve', '12', {'ns': [20], 'nl': [100]}], ['OnBalanceVolAve', '288', {'ns': [40], 'nl': [75]}], ['OnBalanceVolAve', '762', {'ns': [1], 'nl': [10]}], ['StochasticOscillator', '2018', {'m': [3], 'os': [25], 'ob': [70], 'n': [17]}], ['OnBalanceVolAve', '1928', {'ns': [20], 'nl': [75]}], ['OnBalanceVolAve', '17', {'ns': [20], 'nl': [100]}], ['BollingerBandsStrategy', '83', {'k': [2.4], 'n': [45]}], ['OnBalanceVolAve', '700', {'ns': [75], 'nl': [175]}], ['RelativeStrengthIndex', '267', {'os': [25], 'ob': [80], 'n': [18]}], ['MovingAverage', '2007', {'ns': [125], 'nl': [130]}], ['BollingerBandsStrategy', '2007', {'k': [1.7], 'n': [190]}], ['RelativeStrengthIndex', '2018', {'os': [20], 'ob': [75], 'n': [20]}], ['OnBalanceVolAve', '883', {'ns': [5], 'nl': [150]}], ['OnBalanceVolAve', '23', {'ns': [40], 'nl': [100]}], ['OnBalanceVolAve', '1109', {'ns': [1], 'nl': [5]}], ['OnBalanceVolAve', '16', {'ns': [50], 'nl': [100]}], ['MovingAverage', '3328', {'ns': [4], 'nl': [120]}], ['StochasticOscillator', '688', {'m': [3], 'os': [20], 'ob': [75], 'n': [13]}], ['tradingRangeBreakout', '267', {'n': [20]}], ['OnBalanceVolAve', '3328', {'ns': [5], 'nl': [25]}], ['RelativeStrengthIndex', '2318', {'os': [20], 'ob': [80], 'n': [14]}], ['tradingRangeBreakout', '823', {'n': [35]}], ['BollingerBandsStrategy', '386', {'k': [1.7], 'n': [10]}], ['OnBalanceVolAve', '941', {'ns': [10], 'nl': [100]}], ['OnBalanceVolAve', '83', {'ns': [40], 'nl': [50]}], ['MovingAverage', '2628', {'ns': [25], 'nl': [125]}], ['MovingAverage', '17', {'ns': [3], 'nl': [25]}], ['OnBalanceVolAve', '1398', {'ns': [10], 'nl': [25]}], ['tradingRangeBreakout', '3328', {'n': [70]}], ['BollingerBandsStrategy', '2319', {'k': [2.3], 'n': [250]}], ['BollingerBandsStrategy', '1109', {'k': [1.9], 'n': [195]}], ['tradingRangeBreakout', '288', {'n': [40]}], ['BollingerBandsStrategy', '688', {'k': [1.9], 'n': [180]}], ['BollingerBandsStrategy', '857', {'k': [2.5], 'n': [85]}], ['MovingAverage', '823', {'ns': [20], 'nl': [45]}], ['MovingAverage', '2388', {'ns': [9], 'nl': [100]}], ['StochasticOscillator', '388', {'m': [11], 'os': [20], 'ob': [80], 'n': [11]}], ['OnBalanceVolAve', '2628', {'ns': [20], 'nl': [30]}], ['tradingRangeBreakout', '992', {'n': [30]}], ['BollingerBandsStrategy', '17', {'k': [2.5], 'n': [160]}], ['BollingerBandsStrategy', '3328', {'k': [2.5], 'n': [45]}], ['MacdHistogram', '1113', {'ns': [8], 'nl': [28], 'time': [12]}], ['RelativeStrengthIndex', '823', {'os': [20], 'ob': [80], 'n': [20]}], ['BollingerBandsStrategy', '388', {'k': [2.3], 'n': [140]}], ['MovingAverage', '3988', {'ns': [20], 'nl': [120]}], ['OnBalanceVolAve', '27', {'ns': [15], 'nl': [40]}], ['MovingAverage', '12', {'ns': [30], 'nl': [40]}], ['OnBalanceVolAve', '1', {'ns': [50], 'nl': [150]}], ['RelativeStrengthIndex', '388', {'os': [30], 'ob': [75], 'n': [18]}], ['BollingerBandsStrategy', '23', {'k': [2.1], 'n': [130]}], ['OnBalanceVolAve', '2388', {'ns': [50], 'nl': [75]}], ['MovingAverage', '27', {'ns': [105], 'nl': [215]}], ['OnBalanceVolAve', '939', {'ns': [20], 'nl': [25]}], ['OnBalanceVolAve', '6', {'ns': [10], 'nl': [50]}], ['OnBalanceVolAve', '11', {'ns': [50], 'nl': [150]}], ['OnBalanceVolAve', '144', {'ns': [10], 'nl': [75]}], ['OnBalanceVolAve', '1038', {'ns': [1], 'nl': [40]}], ['StochasticOscillator', '700', {'m': [3], 'os': [30], 'ob': [80], 'n': [13]}], ['MovingAverage', '2319', {'ns': [20], 'nl': [70]}], ['BollingerBandsStrategy', '941', {'k': [2.4], 'n': [15]}], ['BollingerBandsStrategy', '12', {'k': [2.4], 'n': [15]}], ['StochasticOscillator', '1', {'m': [3], 'os': [20], 'ob': [75], 'n': [12]}], ['RelativeStrengthIndex', '2388', {'os': [25], 'ob': [80], 'n': [15]}], ['OnBalanceVolAve', '151', {'ns': [10], 'nl': [125]}], ['StochasticOscillator', '2007', {'m': [3], 'os': [25], 'ob': [80], 'n': [16]}], ['MovingAverage', '992', {'ns': [20], 'nl': [30]}], ['tradingRangeBreakout', '2388', {'n': [15]}], ['tradingRangeBreakout', '2628', {'n': [20]}], ['OnBalanceVolAve', '3988', {'ns': [40], 'nl': [50]}], ['OnBalanceVolAve', '688', {'ns': [5], 'nl': [75]}], ['BollingerBandsStrategy', '6', {'k': [1.5], 'n': [115]}], ['StochasticOscillator', '11', {'m': [7], 'os': [20], 'ob': [80], 'n': [16]}], ['OnBalanceVolAve', '101', {'ns': [50], 'nl': [75]}], ['MovingAverage', '939', {'ns': [5], 'nl': [135]}], ['BollingerBandsStrategy', '267', {'k': [2.2], 'n': [85]}], ['BollingerBandsStrategy', '1928', {'k': [2.5], 'n': [40]}], ['OnBalanceVolAve', '66', {'ns': [15], 'nl': [20]}], ['StochasticOscillator', '1109', {'m': [3], 'os': [30], 'ob': [70], 'n': [14]}], ['OnBalanceVolAve', '2', {'ns': [20], 'nl': [40]}], ['MovingAverage', '267', {'ns': [1], 'nl': [20]}], ['StochasticOscillator', '2388', {'m': [7], 'os': [25], 'ob': [80], 'n': [11]}], ['OnBalanceVolAve', '1299', {'ns': [50], 'nl': [175]}], ['BollingerBandsStrategy', '1', {'k': [2.2], 'n': [50]}], ['BollingerBandsStrategy', '2', {'k': [2.2], 'n': [25]}], ['MovingAverage', '1088', {'ns': [85], 'nl': [115]}], ['RelativeStrengthIndex', '3328', {'os': [25], 'ob': [80], 'n': [15]}], ['BollingerBandsStrategy', '2388', {'k': [2.5], 'n': [145]}], ['OnBalanceVolAve', '823', {'ns': [10], 'nl': [40]}], ['RelativeStrengthIndex', '1299', {'os': [30], 'ob': [80], 'n': [16]}], ['BollingerBandsStrategy', '101', {'k': [2.1], 'n': [155]}], ['RelativeStrengthIndex', '66', {'os': [20], 'ob': [70], 'n': [16]}], ['MovingAverage', '1038', {'ns': [45], 'nl': [95]}], ['RelativeStrengthIndex', '3988', {'os': [20], 'ob': [80], 'n': [18]}], ['OnBalanceVolAve', '1044', {'ns': [5], 'nl': [40]}], ['BollingerBandsStrategy', '3', {'k': [2.5], 'n': [130]}], ['tradingRangeBreakout', '17', {'n': [25]}], ['tradingRangeBreakout', '2007', {'n': [30]}], ['tradingRangeBreakout', '1299', {'n': [30]}], ['BollingerBandsStrategy', '288', {'k': [1.5], 'n': [240]}], ['OnBalanceVolAve', '267', {'ns': [25], 'nl': [30]}], ['MovingAverage', '1398', {'ns': [6], 'nl': [155]}], ['tradingRangeBreakout', '3988', {'n': [90]}], ['StochasticOscillator', '151', {'m': [3], 'os': [30], 'ob': [70], 'n': [12]}], ['OnBalanceVolAve', '5', {'ns': [175], 'nl': [200]}], ['BollingerBandsStrategy', '1038', {'k': [2.4], 'n': [15]}], ['BollingerBandsStrategy', '3988', {'k': [2.5], 'n': [70]}], ['MovingAverage', '83', {'ns': [3], 'nl': [35]}], ['OnBalanceVolAve', '1088', {'ns': [10], 'nl': [100]}], ['StochasticOscillator', '12', {'m': [3], 'os': [30], 'ob': [70], 'n': [15]}], ['MovingAverage', '16', {'ns': [1], 'nl': [40]}], ['StochasticOscillator', '1928', {'m': [3], 'os': [30], 'ob': [80], 'n': [13]}], ['RelativeStrengthIndex', '12', {'os': [25], 'ob': [80], 'n': [15]}], ['BollingerBandsStrategy', '11', {'k': [2.5], 'n': [20]}], ['OnBalanceVolAve', '19', {'ns': [30], 'nl': [50]}], ['tradingRangeBreakout', '939', {'n': [90]}], ['MovingAverage', '11', {'ns': [3], 'nl': [15]}], ['RelativeStrengthIndex', '939', {'os': [25], 'ob': [75], 'n': [16]}], ['BollingerBandsStrategy', '823', {'k': [2.5], 'n': [90]}], ['MovingAverage', '66', {'ns': [20], 'nl': [60]}], ['BollingerBandsStrategy', '66', {'k': [1.8], 'n': [15]}], ['BollingerBandsStrategy', '1113', {'k': [2.1], 'n': [165]}], ['tradingRangeBreakout', '27', {'n': [10]}], ['OnBalanceVolAve', '386', {'ns': [15], 'nl': [20]}], ['OnBalanceVolAve', '1113', {'ns': [20], 'nl': [50]}], ['BollingerBandsStrategy', '2318', {'k': [1.9], 'n': [200]}], ['MovingAverage', '1928', {'ns': [75], 'nl': [190]}], ['MovingAverage', '883', {'ns': [30], 'nl': [50]}], ['BollingerBandsStrategy', '1299', {'k': [2.4], 'n': [250]}], ['BollingerBandsStrategy', '939', {'k': [2.3], 'n': [155]}], ['tradingRangeBreakout', '66', {'n': [70]}], ['RelativeStrengthIndex', '11', {'os': [20], 'ob': [80], 'n': [16]}], ['tradingRangeBreakout', '16', {'n': [10]}], ['BollingerBandsStrategy', '1398', {'k': [2.5], 'n': [70]}], ['BollingerBandsStrategy', '2628', {'k': [2.4], 'n': [190]}], ['StochasticOscillator', '23', {'m': [11], 'os': [20], 'ob': [80], 'n': [12]}], ['StochasticOscillator', '386', {'m': [3], 'os': [25], 'ob': [75], 'n': [14]}], ['OnBalanceVolAve', '836', {'ns': [1], 'nl': [30]}], ['tradingRangeBreakout', '1398', {'n': [75]}], ['tradingRangeBreakout', '1038', {'n': [70]}], ['MovingAverage', '941', {'ns': [6], 'nl': [90]}], ['tradingRangeBreakout', '941', {'n': [45]}], ['StochasticOscillator', '267', {'m': [11], 'os': [20], 'ob': [80], 'n': [15]}], ['tradingRangeBreakout', '2018', {'n': [20]}], ['OnBalanceVolAve', '992', {'ns': [1], 'nl': [5]}], ['BollingerBandsStrategy', '16', {'k': [2.3], 'n': [10]}], ['MovingAverage', '762', {'ns': [2], 'nl': [40]}], ['StochasticOscillator', '1038', {'m': [3], 'os': [30], 'ob': [80], 'n': [11]}], ['MovingAverage', '1109', {'ns': [130], 'nl': [140]}], ['RelativeStrengthIndex', '2628', {'os': [20], 'ob': [75], 'n': [14]}], ['MovingAverage', '19', {'ns': [5], 'nl': [25]}], ['RelativeStrengthIndex', '1038', {'os': [20], 'ob': [80], 'n': [18]}], ['RelativeStrengthIndex', '1', {'os': [30], 'ob': [75], 'n': [17]}], ['RelativeStrengthIndex', '2', {'os': [20], 'ob': [80], 'n': [17]}], ['MovingAverage', '3', {'ns': [7], 'nl': [40]}], ['RelativeStrengthIndex', '23', {'os': [30], 'ob': [70], 'n': [15]}], ['OnBalanceVolAve', '3', {'ns': [40], 'nl': [75]}], ['tradingRangeBreakout', '883', {'n': [40]}], ['StochasticOscillator', '175', {'m': [3], 'os': [30], 'ob': [75], 'n': [20]}], ['MovingAverage', '1299', {'ns': [20], 'nl': [40]}], ['tradingRangeBreakout', '11', {'n': [10]}], ['BollingerBandsStrategy', '1088', {'k': [1.8], 'n': [25]}], ['MovingAverage', '2', {'ns': [100], 'nl': [235]}], ['tradingRangeBreakout', '2319', {'n': [50]}], ['StochasticOscillator', '1299', {'m': [3], 'os': [20], 'ob': [75], 'n': [18]}], ['MovingAverage', '1', {'ns': [10], 'nl': [30]}], ['BollingerBandsStrategy', '1044', {'k': [2.1], 'n': [15]}], ['StochasticOscillator', '1113', {'m': [11], 'os': [25], 'ob': [80], 'n': [12]}], ['RelativeStrengthIndex', '1398', {'os': [20], 'ob': [80], 'n': [16]}], ['BollingerBandsStrategy', '144', {'k': [1.7], 'n': [15]}], ['RelativeStrengthIndex', '83', {'os': [20], 'ob': [70], 'n': [19]}], ['OnBalanceVolAve', '857', {'ns': [25], 'nl': [50]}], ['MovingAverage', '6', {'ns': [135], 'nl': [165]}], ['BollingerBandsStrategy', '992', {'k': [2.2], 'n': [65]}], ['tradingRangeBreakout', '12', {'n': [35]}], ['BollingerBandsStrategy', '836', {'k': [2.5], 'n': [110]}], ['MovingAverage', '857', {'ns': [5], 'nl': [15]}], ['tradingRangeBreakout', '3', {'n': [30]}], ['MovingAverage', '23', {'ns': [8], 'nl': [25]}], ['StochasticOscillator', '83', {'m': [3], 'os': [20], 'ob': [80], 'n': [12]}], ['tradingRangeBreakout', '1', {'n': [30]}], ['tradingRangeBreakout', '1109', {'n': [50]}], ['StochasticOscillator', '1398', {'m': [11], 'os': [30], 'ob': [70], 'n': [13]}], ['OnBalanceVolAve', '2319', {'ns': [40], 'nl': [50]}], ['RelativeStrengthIndex', '6', {'os': [30], 'ob': [75], 'n': [20]}], ['StochasticOscillator', '6', {'m': [3], 'os': [25], 'ob': [80], 'n': [18]}], ['tradingRangeBreakout', '2', {'n': [70]}], ['RelativeStrengthIndex', '17', {'os': [25], 'ob': [80], 'n': [11]}], ['MovingAverage', '101', {'ns': [30], 'nl': [105]}], ['StochasticOscillator', '2', {'m': [3], 'os': [20], 'ob': [80], 'n': [20]}], ['RelativeStrengthIndex', '2007', {'os': [20], 'ob': [80], 'n': [16]}], ['StochasticOscillator', '2319', {'m': [3], 'os': [25], 'ob': [75], 'n': [17]}], ['tradingRangeBreakout', '5', {'n': [30]}], ['tradingRangeBreakout', '23', {'n': [20]}], ['StochasticOscillator', '823', {'m': [3], 'os': [20], 'ob': [80], 'n': [13]}], ['BollingerBandsStrategy', '19', {'k': [2.0], 'n': [130]}], ['StochasticOscillator', '2628', {'m': [11], 'os': [25], 'ob': [75], 'n': [16]}], ['tradingRangeBreakout', '83', {'n': [20]}], ['RelativeStrengthIndex', '386', {'os': [25], 'ob': [80], 'n': [16]}], ['RelativeStrengthIndex', '2319', {'os': [30], 'ob': [80], 'n': [20]}], ['RelativeStrengthIndex', '992', {'os': [30], 'ob': [75], 'n': [14]}], ['StochasticOscillator', '3328', {'m': [3], 'os': [20], 'ob': [75], 'n': [19]}], ['MovingAverage', '5', {'ns': [55], 'nl': [65]}], ['RelativeStrengthIndex', '3', {'os': [25], 'ob': [80], 'n': [16]}], ['MovingAverage', '688', {'ns': [180], 'nl': [190]}], ['tradingRangeBreakout', '19', {'n': [20]}], ['StochasticOscillator', '66', {'m': [3], 'os': [20], 'ob': [80], 'n': [19]}], ['MovingAverage', '386', {'ns': [10], 'nl': [135]}], ['tradingRangeBreakout', '1928', {'n': [10]}], ['RelativeStrengthIndex', '16', {'os': [20], 'ob': [80], 'n': [16]}], ['tradingRangeBreakout', '386', {'n': [25]}], ['StochasticOscillator', '5', {'m': [7], 'os': [20], 'ob': [70], 'n': [18]}], ['StochasticOscillator', '939', {'m': [3], 'os': [30], 'ob': [75], 'n': [11]}], ['MovingAverage', '1113', {'ns': [65], 'nl': [105]}], ['StochasticOscillator', '836', {'m': [3], 'os': [20], 'ob': [80], 'n': [14]}], ['RelativeStrengthIndex', '27', {'os': [25], 'ob': [80], 'n': [11]}], ['StochasticOscillator', '1088', {'m': [7], 'os': [20], 'ob': [80], 'n': [16]}], ['tradingRangeBreakout', '1088', {'n': [80]}], ['StochasticOscillator', '16', {'m': [3], 'os': [20], 'ob': [70], 'n': [11]}], ['MovingAverage', '151', {'ns': [170], 'nl': [220]}], ['StochasticOscillator', '992', {'m': [3], 'os': [20], 'ob': [75], 'n': [11]}], ['RelativeStrengthIndex', '941', {'os': [20], 'ob': [70], 'n': [15]}], ['tradingRangeBreakout', '762', {'n': [20]}], ['tradingRangeBreakout', '101', {'n': [50]}], ['StochasticOscillator', '941', {'m': [11], 'os': [25], 'ob': [80], 'n': [16]}], ['StochasticOscillator', '2318', {'m': [3], 'os': [20], 'ob': [75], 'n': [14]}], ['MovingAverage', '836', {'ns': [60], 'nl': [70]}], ['BollingerBandsStrategy', '27', {'k': [2.5], 'n': [160]}], ['StochasticOscillator', '883', {'m': [3], 'os': [25], 'ob': [80], 'n': [13]}], ['StochasticOscillator', '288', {'m': [11], 'os': [25], 'ob': [80], 'n': [19]}], ['tradingRangeBreakout', '6', {'n': [50]}], ['RelativeStrengthIndex', '288', {'os': [20], 'ob': [80], 'n': [13]}], ['StochasticOscillator', '144', {'m': [3], 'os': [20], 'ob': [80], 'n': [16]}], ['tradingRangeBreakout', '857', {'n': [10]}], ['tradingRangeBreakout', '1113', {'n': [10]}], ['StochasticOscillator', '3988', {'m': [3], 'os': [20], 'ob': [80], 'n': [19]}], ['MovingAverage', '144', {'ns': [110], 'nl': [220]}], ['BollingerBandsStrategy', '5', {'k': [2.4], 'n': [90]}], ['RelativeStrengthIndex', '19', {'os': [20], 'ob': [80], 'n': [16]}], ['RelativeStrengthIndex', '5', {'os': [30], 'ob': [80], 'n': [13]}], ['StochasticOscillator', '1044', {'m': [3], 'os': [20], 'ob': [75], 'n': [20]}], ['MovingAverage', '1044', {'ns': [130], 'nl': [245]}], ['RelativeStrengthIndex', '101', {'os': [25], 'ob': [80], 'n': [17]}], ['RelativeStrengthIndex', '1928', {'os': [20], 'ob': [80], 'n': [14]}], ['RelativeStrengthIndex', '1113', {'os': [30], 'ob': [80], 'n': [12]}], ['tradingRangeBreakout', '144', {'n': [125]}], ['tradingRangeBreakout', '688', {'n': [60]}], ['StochasticOscillator', '17', {'m': [7], 'os': [20], 'ob': [80], 'n': [16]}], ['StochasticOscillator', '857', {'m': [7], 'os': [25], 'ob': [75], 'n': [16]}], ['StochasticOscillator', '3', {'m': [3], 'os': [20], 'ob': [75], 'n': [19]}], ['StochasticOscillator', '19', {'m': [11], 'os': [25], 'ob': [75], 'n': [18]}], ['tradingRangeBreakout', '151', {'n': [250]}], ['tradingRangeBreakout', '1044', {'n': [100]}], ['RelativeStrengthIndex', '688', {'os': [20], 'ob': [80], 'n': [20]}], ['RelativeStrengthIndex', '762', {'os': [30], 'ob': [75], 'n': [20]}], ['StochasticOscillator', '762', {'m': [11], 'os': [20], 'ob': [80], 'n': [14]}], ['BollingerBandsStrategy', '151', {'k': [2.1], 'n': [110]}], ['StochasticOscillator', '27', {'m': [3], 'os': [20], 'ob': [80], 'n': [12]}], ['RelativeStrengthIndex', '144', {'os': [20], 'ob': [80], 'n': [16]}], ['RelativeStrengthIndex', '1109', {'os': [20], 'ob': [80], 'n': [19]}], ['StochasticOscillator', '101', {'m': [3], 'os': [20], 'ob': [70], 'n': [12]}], ['RelativeStrengthIndex', '1044', {'os': [30], 'ob': [75], 'n': [17]}], ['RelativeStrengthIndex', '836', {'os': [20], 'ob': [70], 'n': [19]}], ['RelativeStrengthIndex', '1088', {'os': [20], 'ob': [70], 'n': [19]}], ['tradingRangeBreakout', '836', {'n': [250]}], ['RelativeStrengthIndex', '857', {'os': [20], 'ob': [80], 'n': [16]}], ['RelativeStrengthIndex', '883', {'os': [30], 'ob': [80], 'n': [16]}], ['RelativeStrengthIndex', '151', {'os': [25], 'ob': [75], 'n': [11]}]]
	# testList = [['HSBCHoldings', '5', {'ns': [30], 'nl': [40]}], ['HangSengBank', '11', {'ns': [3], 'nl': [15]}], ['BankofEAsia', '23', {'ns': [6], 'nl': [20]}], ['HKEx', '388', {'ns': [3], 'nl': [35]}], ['CCB', '939', {'ns': [5], 'nl': [135]}], ['AIA', '1299', {'ns': [9], 'nl': [40]}], ['ICBC', '1398', {'ns': [6], 'nl': [135]}], ['PingAn', '2318', {'ns': [1], 'nl': [40]}], ['BOCHongKong', '2388', {'ns': [8], 'nl': [105]}], ['ChinaLife', '2628', {'ns': [25], 'nl': [35]}], ['Bankcomm', '3328', {'ns': [10], 'nl': [135]}], ['BankofChina', '3988', {'ns': [20], 'nl': [120]}], ['CLPHoldings', '2', {'ns': [50], 'nl': [60]}], ['HK&ChinaGas', '3', {'ns': [6], 'nl': [40]}], ['PowerAssets', '6', {'ns': [135], 'nl': [165]}], ['ChinaResPower', '836', {'ns': [125], 'nl': [130]}], ['CKIHoldings', '1038', {'ns': [15], 'nl': [85]}], ['HendersonLand', '12', {'ns': [30], 'nl': [40]}], ['SHKPpt', '16', {'ns': [1], 'nl': [45]}], ['NewWorldDev', '17', {'ns': [2], 'nl': [25]}], ['SinoLand', '83', {'ns': [3], 'nl': [35]}], ['HangLungPpt', '101', {'ns': [175], 'nl': [195]}], ['ChinaOverseas', '688', {'ns': [110], 'nl': [160]}], ['LinkREIT', '823', {'ns': [8], 'nl': [60]}], ['ChinaResLand', '1109', {'ns': [105], 'nl': [120]}], ['CKAsset', '1113', {'ns': [70], 'nl': [95]}], ['CountryGarden', '2007', {'ns': [175], 'nl': [230]}], ['CKHHoldings', '1', {'ns': [10], 'nl': [30]}], ['SwirePacificA', '19', {'ns': [9], 'nl': [20]}], ['GalaxyEnt', '27', {'ns': [100], 'nl': [230]}], ['MTRCorporation', '66', {'ns': [15], 'nl': [60]}], ['ChinaMerPort', '144', {'ns': [10], 'nl': [45]}], ['WantWantChina', '151', {'ns': [150], 'nl': [155]}], ['GeelyAuto', '175', {'ns': [10], 'nl': [15]}], ['CITIC', '267', {'ns': [9], 'nl': [15]}], ['WHGroup', '288', {'ns': [50], 'nl': [80]}], ['SinopecCorp', '386', {'ns': [75], 'nl': [80]}], ['Tencent', '700', {'ns': [20], 'nl': [30]}], ['ChinaUnicom', '762', {'ns': [2], 'nl': [30]}], ['PetroChina', '857', {'ns': [4], 'nl': [15]}], ['CNOOC', '883', {'ns': [30], 'nl': [50]}], ['ChinaMobile', '941', {'ns': [5], 'nl': [85]}], ['LenovoGroup', '992', {'ns': [4], 'nl': [35]}], ['HenganIntl', '1044', {'ns': [130], 'nl': [135]}], ['ChinaShenhua', '1088', {'ns': [80], 'nl': [120]}], ['SandsChinaLtd', '1928', {'ns': [65], 'nl': [230]}], ['AACTech', '2018', {'ns': [185], 'nl': [205]}], ['MengniuDairy', '2319', {'ns': [3], 'nl': [105]}], ['SunnyOptical', '2382', {'ns': [105], 'nl': [155]}], ['HSBCHoldings', '5', {'k': [2.2], 'n': [10]}], ['HangSengBank', '11', {'k': [2.5], 'n': [20]}], ['BankofEAsia', '23', {'k': [2.1], 'n': [130]}], ['HKEx', '388', {'k': [2.3], 'n': [140]}], ['CCB', '939', {'k': [2.3], 'n': [170]}], ['AIA', '1299', {'k': [2.3], 'n': [120]}], ['ICBC', '1398', {'k': [2.3], 'n': [170]}], ['PingAn', '2318', {'k': [1.9], 'n': [200]}], ['BOCHongKong', '2388', {'k': [2.1], 'n': [180]}], ['ChinaLife', '2628', {'k': [2.5], 'n': [175]}], ['Bankcomm', '3328', {'k': [2.3], 'n': [45]}], ['BankofChina', '3988', {'k': [2.1], 'n': [165]}], ['CLPHoldings', '2', {'k': [2.0], 'n': [35]}], ['HK&ChinaGas', '3', {'k': [2.5], 'n': [140]}], ['PowerAssets', '6', {'k': [1.5], 'n': [115]}], ['ChinaResPower', '836', {'k': [1.5], 'n': [70]}], ['CKIHoldings', '1038', {'k': [2.5], 'n': [115]}], ['HendersonLand', '12', {'k': [2.4], 'n': [15]}], ['SHKPpt', '16', {'k': [2.3], 'n': [15]}], ['NewWorldDev', '17', {'k': [2.5], 'n': [120]}], ['SinoLand', '83', {'k': [2.1], 'n': [70]}], ['HangLungPpt', '101', {'k': [2.2], 'n': [170]}], ['ChinaOverseas', '688', {'k': [1.9], 'n': [170]}], ['LinkREIT', '823', {'k': [2.5], 'n': [85]}], ['ChinaResLand', '1109', {'k': [1.9], 'n': [210]}], ['CKAsset', '1113', {'k': [2.2], 'n': [165]}], ['CountryGarden', '2007', {'k': [1.5], 'n': [220]}], ['CKHHoldings', '1', {'k': [2.5], 'n': [85]}], ['SwirePacificA', '19', {'k': [2.5], 'n': [95]}], ['GalaxyEnt', '27', {'k': [2.5], 'n': [180]}], ['MTRCorporation', '66', {'k': [2.2], 'n': [10]}], ['ChinaMerPort', '144', {'k': [2.0], 'n': [10]}], ['WantWantChina', '151', {'k': [1.6], 'n': [15]}], ['GeelyAuto', '175', {'k': [2.4], 'n': [145]}], ['CITIC', '267', {'k': [1.7], 'n': [95]}], ['WHGroup', '288', {'k': [1.5], 'n': [240]}], ['SinopecCorp', '386', {'k': [1.5], 'n': [10]}], ['Tencent', '700', {'k': [2.5], 'n': [120]}], ['ChinaUnicom', '762', {'k': [2.0], 'n': [165]}], ['PetroChina', '857', {'k': [2.5], 'n': [135]}], ['CNOOC', '883', {'k': [2.5], 'n': [120]}], ['ChinaMobile', '941', {'k': [2.1], 'n': [175]}], ['LenovoGroup', '992', {'k': [2.2], 'n': [65]}], ['HenganIntl', '1044', {'k': [1.9], 'n': [20]}], ['ChinaShenhua', '1088', {'k': [1.9], 'n': [20]}], ['SandsChinaLtd', '1928', {'k': [2.5], 'n': [40]}], ['AACTech', '2018', {'k': [1.7], 'n': [85]}], ['MengniuDairy', '2319', {'k': [2.4], 'n': [250]}], ['SunnyOptical', '2382', {'k': [2.4], 'n': [70]}], ['HSBCHoldings', '5', {'ns': [8], 'nl': [24], 'time': [8]}], ['HangSengBank', '11', {'ns': [8], 'nl': [36], 'time': [8]}], ['BankofEAsia', '23', {'ns': [8], 'nl': [32], 'time': [8]}], ['HKEx', '388', {'ns': [8], 'nl': [38], 'time': [9]}], ['CCB', '939', {'ns': [8], 'nl': [28], 'time': [9]}], ['AIA', '1299', {'ns': [8], 'nl': [30], 'time': [8]}], ['ICBC', '1398', {'ns': [9], 'nl': [26], 'time': [9]}], ['PingAn', '2318', {'ns': [8], 'nl': [26], 'time': [8]}], ['BOCHongKong', '2388', {'ns': [8], 'nl': [38], 'time': [10]}], ['ChinaLife', '2628', {'ns': [8], 'nl': [28], 'time': [8]}], ['Bankcomm', '3328', {'ns': [8], 'nl': [28], 'time': [8]}], ['BankofChina', '3988', {'ns': [8], 'nl': [24], 'time': [8]}], ['CLPHoldings', '2', {'ns': [8], 'nl': [26], 'time': [8]}], ['HK&ChinaGas', '3', {'ns': [8], 'nl': [30], 'time': [8]}], ['PowerAssets', '6', {'ns': [8], 'nl': [24], 'time': [8]}], ['ChinaResPower', '836', {'ns': [8], 'nl': [24], 'time': [8]}], ['CKIHoldings', '1038', {'ns': [10], 'nl': [24], 'time': [8]}], ['HendersonLand', '12', {'ns': [9], 'nl': [26], 'time': [8]}], ['SHKPpt', '16', {'ns': [8], 'nl': [24], 'time': [8]}], ['NewWorldDev', '17', {'ns': [8], 'nl': [26], 'time': [8]}], ['SinoLand', '83', {'ns': [8], 'nl': [30], 'time': [8]}], ['HangLungPpt', '101', {'ns': [8], 'nl': [36], 'time': [8]}], ['ChinaOverseas', '688', {'ns': [8], 'nl': [30], 'time': [8]}], ['LinkREIT', '823', {'ns': [8], 'nl': [32], 'time': [9]}], ['ChinaResLand', '1109', {'ns': [8], 'nl': [24], 'time': [8]}], ['CKAsset', '1113', {'ns': [9], 'nl': [28], 'time': [11]}], ['CountryGarden', '2007', {'ns': [8], 'nl': [24], 'time': [8]}], ['CKHHoldings', '1', {'ns': [8], 'nl': [24], 'time': [8]}], ['SwirePacificA', '19', {'ns': [8], 'nl': [24], 'time': [8]}], ['GalaxyEnt', '27', {'ns': [8], 'nl': [26], 'time': [8]}], ['MTRCorporation', '66', {'ns': [8], 'nl': [34], 'time': [9]}], ['ChinaMerPort', '144', {'ns': [12], 'nl': [34], 'time': [9]}], ['WantWantChina', '151', {'ns': [8], 'nl': [38], 'time': [9]}], ['GeelyAuto', '175', {'ns': [8], 'nl': [30], 'time': [9]}], ['CITIC', '267', {'ns': [8], 'nl': [28], 'time': [8]}], ['WHGroup', '288', {'ns': [8], 'nl': [24], 'time': [9]}], ['SinopecCorp', '386', {'ns': [8], 'nl': [26], 'time': [8]}], ['Tencent', '700', {'ns': [13], 'nl': [34], 'time': [9]}], ['ChinaUnicom', '762', {'ns': [8], 'nl': [38], 'time': [8]}], ['PetroChina', '857', {'ns': [9], 'nl': [24], 'time': [8]}], ['CNOOC', '883', {'ns': [8], 'nl': [26], 'time': [8]}], ['ChinaMobile', '941', {'ns': [8], 'nl': [30], 'time': [8]}], ['LenovoGroup', '992', {'ns': [8], 'nl': [38], 'time': [8]}], ['HenganIntl', '1044', {'ns': [8], 'nl': [24], 'time': [8]}], ['ChinaShenhua', '1088', {'ns': [8], 'nl': [34], 'time': [8]}], ['SandsChinaLtd', '1928', {'ns': [8], 'nl': [24], 'time': [8]}], ['AACTech', '2018', {'ns': [8], 'nl': [24], 'time': [8]}], ['MengniuDairy', '2319', {'ns': [8], 'nl': [32], 'time': [9]}], ['SunnyOptical', '2382', {'ns': [8], 'nl': [24], 'time': [8]}], ['HSBCHoldings', '5', {'os': [14], 'ob': [89], 'n': [10]}], ['HangSengBank', '11', {'os': [30], 'ob': [74], 'n': [10]}], ['BankofEAsia', '23', {'os': [27], 'ob': [93], 'n': [10]}], ['HKEx', '388', {'os': [30], 'ob': [70], 'n': [11]}], ['CCB', '939', {'os': [22], 'ob': [94], 'n': [12]}], ['AIA', '1299', {'os': [30], 'ob': [90], 'n': [16]}], ['ICBC', '1398', {'os': [31], 'ob': [72], 'n': [20]}], ['PingAn', '2318', {'os': [30], 'ob': [84], 'n': [11]}], ['BOCHongKong', '2388', {'os': [25], 'ob': [88], 'n': [15]}], ['ChinaLife', '2628', {'os': [31], 'ob': [73], 'n': [18]}], ['Bankcomm', '3328', {'os': [27], 'ob': [88], 'n': [11]}], ['BankofChina', '3988', {'os': [21], 'ob': [75], 'n': [13]}], ['CLPHoldings', '2', {'os': [13], 'ob': [70], 'n': [30]}], ['HK&ChinaGas', '3', {'os': [28], 'ob': [83], 'n': [10]}], ['PowerAssets', '6', {'os': [24], 'ob': [82], 'n': [20]}], ['ChinaResPower', '836', {'os': [27], 'ob': [82], 'n': [26]}], ['CKIHoldings', '1038', {'os': [29], 'ob': [79], 'n': [29]}], ['HendersonLand', '12', {'os': [23], 'ob': [78], 'n': [13]}], ['SHKPpt', '16', {'os': [22], 'ob': [80], 'n': [10]}], ['NewWorldDev', '17', {'os': [24], 'ob': [83], 'n': [10]}], ['SinoLand', '83', {'os': [24], 'ob': [86], 'n': [30]}], ['HangLungPpt', '101', {'os': [24], 'ob': [84], 'n': [15]}], ['ChinaOverseas', '688', {'os': [10], 'ob': [81], 'n': [29]}], ['LinkREIT', '823', {'os': [22], 'ob': [71], 'n': [29]}], ['ChinaResLand', '1109', {'os': [14], 'ob': [87], 'n': [18]}], ['CKAsset', '1113', {'os': [30], 'ob': [76], 'n': [26]}], ['CountryGarden', '2007', {'os': [28], 'ob': [81], 'n': [21]}], ['CKHHoldings', '1', {'os': [22], 'ob': [83], 'n': [12]}], ['SwirePacificA', '19', {'os': [16], 'ob': [85], 'n': [10]}], ['GalaxyEnt', '27', {'os': [23], 'ob': [70], 'n': [11]}], ['MTRCorporation', '66', {'os': [27], 'ob': [92], 'n': [14]}], ['ChinaMerPort', '144', {'os': [17], 'ob': [84], 'n': [28]}], ['WantWantChina', '151', {'os': [23], 'ob': [87], 'n': [11]}], ['GeelyAuto', '175', {'os': [30], 'ob': [84], 'n': [11]}], ['CITIC', '267', {'os': [23], 'ob': [74], 'n': [18]}], ['WHGroup', '288', {'os': [31], 'ob': [78], 'n': [17]}], ['SinopecCorp', '386', {'os': [31], 'ob': [93], 'n': [22]}], ['Tencent', '700', {'os': [23], 'ob': [90], 'n': [20]}], ['ChinaUnicom', '762', {'os': [31], 'ob': [77], 'n': [14]}], ['PetroChina', '857', {'os': [30], 'ob': [94], 'n': [28]}], ['CNOOC', '883', {'os': [31], 'ob': [94], 'n': [10]}], ['ChinaMobile', '941', {'os': [31], 'ob': [73], 'n': [21]}], ['LenovoGroup', '992', {'os': [27], 'ob': [87], 'n': [14]}], ['HenganIntl', '1044', {'os': [29], 'ob': [95], 'n': [21]}], ['ChinaShenhua', '1088', {'os': [21], 'ob': [80], 'n': [18]}], ['SandsChinaLtd', '1928', {'os': [30], 'ob': [88], 'n': [11]}], ['AACTech', '2018', {'os': [30], 'ob': [91], 'n': [27]}], ['MengniuDairy', '2319', {'os': [23], 'ob': [89], 'n': [24]}], ['SunnyOptical', '2382', {'os': [31], 'ob': [76], 'n': [18]}], ['HSBCHoldings', '5', {'ns': [165], 'nl': [205]}], ['HangSengBank', '11', {'ns': [80], 'nl': [85]}], ['BankofEAsia', '23', {'ns': [35], 'nl': [115]}], ['HKEx', '388', {'ns': [30], 'nl': [35]}], ['CCB', '939', {'ns': [6], 'nl': [35]}], ['AIA', '1299', {'ns': [50], 'nl': [165]}], ['ICBC', '1398', {'ns': [135], 'nl': [195]}], ['PingAn', '2318', {'ns': [90], 'nl': [180]}], ['BOCHongKong', '2388', {'ns': [155], 'nl': [170]}], ['ChinaLife', '2628', {'ns': [25], 'nl': [35]}], ['Bankcomm', '3328', {'ns': [3], 'nl': [30]}], ['BankofChina', '3988', {'ns': [135], 'nl': [165]}], ['CLPHoldings', '2', {'ns': [20], 'nl': [35]}], ['HK&ChinaGas', '3', {'ns': [4], 'nl': [70]}], ['PowerAssets', '6', {'ns': [50], 'nl': [60]}], ['ChinaResPower', '836', {'ns': [95], 'nl': [160]}], ['CKIHoldings', '1038', {'ns': [1], 'nl': [10]}], ['HendersonLand', '12', {'ns': [15], 'nl': [105]}], ['SHKPpt', '16', {'ns': [35], 'nl': [110]}], ['NewWorldDev', '17', {'ns': [15], 'nl': [100]}], ['SinoLand', '83', {'ns': [30], 'nl': [85]}], ['HangLungPpt', '101', {'ns': [55], 'nl': [70]}], ['ChinaOverseas', '688', {'ns': [5], 'nl': [70]}], ['LinkREIT', '823', {'ns': [9], 'nl': [30]}], ['ChinaResLand', '1109', {'ns': [190], 'nl': [205]}], ['CKAsset', '1113', {'ns': [20], 'nl': [80]}], ['CountryGarden', '2007', {'ns': [4], 'nl': [235]}], ['CKHHoldings', '1', {'ns': [50], 'nl': [150]}], ['SwirePacificA', '19', {'ns': [15], 'nl': [65]}], ['GalaxyEnt', '27', {'ns': [15], 'nl': [45]}], ['MTRCorporation', '66', {'ns': [55], 'nl': [60]}], ['ChinaMerPort', '144', {'ns': [1], 'nl': [85]}], ['WantWantChina', '151', {'ns': [30], 'nl': [90]}], ['GeelyAuto', '175', {'ns': [195], 'nl': [200]}], ['CITIC', '267', {'ns': [20], 'nl': [45]}], ['WHGroup', '288', {'ns': [40], 'nl': [80]}], ['SinopecCorp', '386', {'ns': [4], 'nl': [60]}], ['Tencent', '700', {'ns': [85], 'nl': [110]}], ['ChinaUnicom', '762', {'ns': [1], 'nl': [170]}], ['PetroChina', '857', {'ns': [30], 'nl': [45]}], ['CNOOC', '883', {'ns': [4], 'nl': [160]}], ['ChinaMobile', '941', {'ns': [15], 'nl': [35]}], ['LenovoGroup', '992', {'ns': [1], 'nl': [45]}], ['HenganIntl', '1044', {'ns': [6], 'nl': [180]}], ['ChinaShenhua', '1088', {'ns': [7], 'nl': [105]}], ['SandsChinaLtd', '1928', {'ns': [40], 'nl': [65]}], ['AACTech', '2018', {'ns': [6], 'nl': [65]}], ['MengniuDairy', '2319', {'ns': [35], 'nl': [65]}], ['SunnyOptical', '2382', {'ns': [45], 'nl': [55]}], ['HSBCHoldings', '5', {'n': [30]}], ['HangSengBank', '11', {'n': [10]}], ['BankofEAsia', '23', {'n': [20]}], ['HKEx', '388', {'n': [20]}], ['CCB', '939', {'n': [20]}], ['AIA', '1299', {'n': [30]}], ['ICBC', '1398', {'n': [75]}], ['PingAn', '2318', {'n': [20]}], ['BOCHongKong', '2388', {'n': [50]}], ['ChinaLife', '2628', {'n': [20]}], ['Bankcomm', '3328', {'n': [70]}], ['BankofChina', '3988', {'n': [100]}], ['CLPHoldings', '2', {'n': [70]}], ['HK&ChinaGas', '3', {'n': [30]}], ['PowerAssets', '6', {'n': [50]}], ['ChinaResPower', '836', {'n': [230]}], ['CKIHoldings', '1038', {'n': [60]}], ['HendersonLand', '12', {'n': [35]}], ['SHKPpt', '16', {'n': [10]}], ['NewWorldDev', '17', {'n': [25]}], ['SinoLand', '83', {'n': [20]}], ['HangLungPpt', '101', {'n': [55]}], ['ChinaOverseas', '688', {'n': [40]}], ['LinkREIT', '823', {'n': [35]}], ['ChinaResLand', '1109', {'n': [55]}], ['CKAsset', '1113', {'n': [10]}], ['CountryGarden', '2007', {'n': [30]}], ['CKHHoldings', '1', {'n': [35]}], ['SwirePacificA', '19', {'n': [20]}], ['GalaxyEnt', '27', {'n': [10]}], ['MTRCorporation', '66', {'n': [70]}], ['ChinaMerPort', '144', {'n': [35]}], ['WantWantChina', '151', {'n': [235]}], ['GeelyAuto', '175', {'n': [15]}], ['CITIC', '267', {'n': [10]}], ['WHGroup', '288', {'n': [40]}], ['SinopecCorp', '386', {'n': [35]}], ['Tencent', '700', {'n': [20]}], ['ChinaUnicom', '762', {'n': [15]}], ['PetroChina', '857', {'n': [10]}], ['CNOOC', '883', {'n': [50]}], ['ChinaMobile', '941', {'n': [55]}], ['LenovoGroup', '992', {'n': [30]}], ['HenganIntl', '1044', {'n': [100]}], ['ChinaShenhua', '1088', {'n': [80]}], ['SandsChinaLtd', '1928', {'n': [10]}], ['AACTech', '2018', {'n': [55]}], ['MengniuDairy', '2319', {'n': [50]}], ['SunnyOptical', '2382', {'n': [130]}], ['HSBCHoldings', '5', {'m': [6], 'os': [20], 'ob': [83], 'n': [13]}], ['HangSengBank', '11', {'m': [7], 'os': [22], 'ob': [92], 'n': [30]}], ['BankofEAsia', '23', {'m': [9], 'os': [13], 'ob': [80], 'n': [45]}], ['HKEx', '388', {'m': [8], 'os': [25], 'ob': [91], 'n': [50]}], ['CCB', '939', {'m': [11], 'os': [17], 'ob': [90], 'n': [160]}], ['AIA', '1299', {'m': [7], 'os': [10], 'ob': [91], 'n': [70]}], ['ICBC', '1398', {'m': [9], 'os': [12], 'ob': [93], 'n': [165]}], ['PingAn', '2318', {'m': [8], 'os': [27], 'ob': [95], 'n': [180]}], ['BOCHongKong', '2388', {'m': [8], 'os': [16], 'ob': [92], 'n': [10]}], ['ChinaLife', '2628', {'m': [8], 'os': [17], 'ob': [89], 'n': [15]}], ['Bankcomm', '3328', {'m': [9], 'os': [27], 'ob': [94], 'n': [180]}], ['BankofChina', '3988', {'m': [7], 'os': [10], 'ob': [94], 'n': [14]}], ['CLPHoldings', '2', {'m': [6], 'os': [31], 'ob': [95], 'n': [6]}], ['HK&ChinaGas', '3', {'m': [5], 'os': [20], 'ob': [89], 'n': [135]}], ['PowerAssets', '6', {'m': [3], 'os': [24], 'ob': [75], 'n': [135]}], ['ChinaResPower', '836', {'m': [4], 'os': [30], 'ob': [72], 'n': [6]}], ['CKIHoldings', '1038', {'m': [7], 'os': [28], 'ob': [95], 'n': [145]}], ['HendersonLand', '12', {'m': [5], 'os': [16], 'ob': [90], 'n': [45]}], ['SHKPpt', '16', {'m': [11], 'os': [11], 'ob': [77], 'n': [20]}], ['NewWorldDev', '17', {'m': [8], 'os': [11], 'ob': [84], 'n': [160]}], ['SinoLand', '83', {'m': [4], 'os': [11], 'ob': [87], 'n': [40]}], ['HangLungPpt', '101', {'m': [10], 'os': [23], 'ob': [74], 'n': [160]}], ['ChinaOverseas', '688', {'m': [4], 'os': [27], 'ob': [72], 'n': [60]}], ['LinkREIT', '823', {'m': [10], 'os': [22], 'ob': [92], 'n': [11]}], ['ChinaResLand', '1109', {'m': [3], 'os': [12], 'ob': [95], 'n': [185]}], ['CKAsset', '1113', {'m': [8], 'os': [10], 'ob': [83], 'n': [11]}], ['CountryGarden', '2007', {'m': [4], 'os': [18], 'ob': [93], 'n': [190]}], ['CKHHoldings', '1', {'m': [9], 'os': [19], 'ob': [82], 'n': [11]}], ['SwirePacificA', '19', {'m': [9], 'os': [11], 'ob': [82], 'n': [13]}], ['GalaxyEnt', '27', {'m': [4], 'os': [10], 'ob': [74], 'n': [14]}], ['MTRCorporation', '66', {'m': [8], 'os': [18], 'ob': [95], 'n': [8]}], ['ChinaMerPort', '144', {'m': [6], 'os': [10], 'ob': [85], 'n': [35]}], ['WantWantChina', '151', {'m': [3], 'os': [24], 'ob': [71], 'n': [8]}], ['GeelyAuto', '175', {'m': [7], 'os': [30], 'ob': [86], 'n': [160]}], ['CITIC', '267', {'m': [5], 'os': [17], 'ob': [79], 'n': [90]}], ['WHGroup', '288', {'m': [7], 'os': [20], 'ob': [94], 'n': [85]}], ['SinopecCorp', '386', {'m': [3], 'os': [20], 'ob': [91], 'n': [20]}], ['Tencent', '700', {'m': [3], 'os': [26], 'ob': [94], 'n': [11]}], ['ChinaUnicom', '762', {'m': [4], 'os': [10], 'ob': [85], 'n': [165]}], ['PetroChina', '857', {'m': [7], 'os': [10], 'ob': [87], 'n': [8]}], ['CNOOC', '883', {'m': [10], 'os': [20], 'ob': [78], 'n': [145]}], ['ChinaMobile', '941', {'m': [7], 'os': [10], 'ob': [91], 'n': [165]}], ['LenovoGroup', '992', {'m': [5], 'os': [24], 'ob': [78], 'n': [10]}], ['HenganIntl', '1044', {'m': [3], 'os': [17], 'ob': [87], 'n': [14]}], ['ChinaShenhua', '1088', {'m': [9], 'os': [14], 'ob': [73], 'n': [25]}], ['SandsChinaLtd', '1928', {'m': [6], 'os': [14], 'ob': [76], 'n': [12]}], ['AACTech', '2018', {'m': [5], 'os': [15], 'ob': [94], 'n': [70]}], ['MengniuDairy', '2319', {'m': [11], 'os': [12], 'ob': [81], 'n': [145]}], ['SunnyOptical', '2382', {'m': [3], 'os': [21], 'ob': [95], 'n': [55]}]]

	bf = Bruteforce()
	# codeName = {'5': 'HSBCHoldings', '11': 'HangSengBank', '23': 'BankofEAsia', '388': 'HKEx', '939': 'CCB', '1299': 'AIA', '1398': 'ICBC', '2318': 'PingAn', '2388': 'BOCHongKong', '2628': 'ChinaLife', '3328': 'Bankcomm', '3988': 'BankofChina', '2': 'CLPHoldings', '3': 'HK&ChinaGas', '6': 'PowerAssets', '836': 'ChinaResPower', '1038': 'CKIHoldings', '12': 'HendersonLand', '16': 'SHKPpt', '17': 'NewWorldDev', '83': 'SinoLand', '101': 'HangLungPpt', '688': 'ChinaOverseas', '823': 'LinkREIT', '1109': 'ChinaResLand', '1113': 'CKAsset', '1997': 'WharfREIC', '2007': 'CountryGarden', '1': 'CKHHoldings', '19': 'SwirePacificA', '27': 'GalaxyEnt', '66': 'MTRCorporation', '144': 'ChinaMerPort', '151': 'WantWantChina', '175': 'GeelyAuto', '267': 'CITIC', '288': 'WHGroup', '386': 'SinopecCorp', '700': 'Tencent', '762': 'ChinaUnicom', '857': 'PetroChina', '883': 'CNOOC', '941': 'ChinaMobile', '992': 'LenovoGroup', '1044': 'HenganIntl', '1088': 'ChinaShenhua', '1928': 'SandsChinaLtd', '2018': 'AACTech', '2319': 'MengniuDairy', '2382': 'SunnyOptical'}	

	codeName = {'2018': 'AACTech'}
	fileObject = open('outsamplePso', 'w+')	
	for test in testList:
		bf.setStockDataTime(test[1], '2016-12-13', '2018-08-15')
		bf.setStrategy(test[0], test[2])
		bStratRes, bBstRes = bf.run()
		record = str(codeName[test[1]]) + '\t' + str(test[1]) + '\t' + str(test[0]) + '\t'+ str(bBstRes[0]) + '\t' + str(bBstRes[1]) + '\t' + str(bBstRes[2]) + '\n'  
		fileObject.write(record)
	fileObject.close()		

def testPSOParticularPara():
	testList = [['HSBCHoldings', 'MovingAverage', '5', {'ns': [30], 'nl': [40]}], ['HangSengBank', 'MovingAverage', '11', {'ns': [3], 'nl': [15]}], ['BankofEAsia', 'MovingAverage', '23', {'ns': [6], 'nl': [20]}], ['HKEx', 'MovingAverage', '388', {'ns': [3], 'nl': [35]}], ['CCB', 'MovingAverage', '939', {'ns': [5], 'nl': [135]}], ['AIA', 'MovingAverage', '1299', {'ns': [9], 'nl': [40]}], ['ICBC', 'MovingAverage', '1398', {'ns': [6], 'nl': [135]}], ['PingAn', 'MovingAverage', '2318', {'ns': [1], 'nl': [40]}], ['BOCHongKong', 'MovingAverage', '2388', {'ns': [8], 'nl': [105]}], ['ChinaLife', 'MovingAverage', '2628', {'ns': [25], 'nl': [35]}], ['Bankcomm', 'MovingAverage', '3328', {'ns': [10], 'nl': [135]}], ['BankofChina', 'MovingAverage', '3988', {'ns': [20], 'nl': [120]}], ['CLPHoldings', 'MovingAverage', '2', {'ns': [50], 'nl': [60]}], ['HK&ChinaGas', 'MovingAverage', '3', {'ns': [6], 'nl': [40]}], ['PowerAssets', 'MovingAverage', '6', {'ns': [135], 'nl': [165]}], ['ChinaResPower', 'MovingAverage', '836', {'ns': [125], 'nl': [130]}], ['CKIHoldings', 'MovingAverage', '1038', {'ns': [15], 'nl': [85]}], ['HendersonLand', 'MovingAverage', '12', {'ns': [30], 'nl': [40]}], ['SHKPpt', 'MovingAverage', '16', {'ns': [1], 'nl': [45]}], ['NewWorldDev', 'MovingAverage', '17', {'ns': [2], 'nl': [25]}], ['SinoLand', 'MovingAverage', '83', {'ns': [3], 'nl': [35]}], ['HangLungPpt', 'MovingAverage', '101', {'ns': [175], 'nl': [195]}], ['ChinaOverseas', 'MovingAverage', '688', {'ns': [110], 'nl': [160]}], ['LinkREIT', 'MovingAverage', '823', {'ns': [8], 'nl': [60]}], ['ChinaResLand', 'MovingAverage', '1109', {'ns': [105], 'nl': [120]}], ['CKAsset', 'MovingAverage', '1113', {'ns': [70], 'nl': [95]}], ['CountryGarden', 'MovingAverage', '2007', {'ns': [175], 'nl': [230]}], ['CKHHoldings', 'MovingAverage', '1', {'ns': [10], 'nl': [30]}], ['SwirePacificA', 'MovingAverage', '19', {'ns': [9], 'nl': [20]}], ['GalaxyEnt', 'MovingAverage', '27', {'ns': [100], 'nl': [230]}], ['MTRCorporation', 'MovingAverage', '66', {'ns': [15], 'nl': [60]}], ['ChinaMerPort', 'MovingAverage', '144', {'ns': [10], 'nl': [45]}], ['WantWantChina', 'MovingAverage', '151', {'ns': [150], 'nl': [155]}], ['GeelyAuto', 'MovingAverage', '175', {'ns': [10], 'nl': [15]}], ['CITIC', 'MovingAverage', '267', {'ns': [9], 'nl': [15]}], ['WHGroup', 'MovingAverage', '288', {'ns': [50], 'nl': [80]}], ['SinopecCorp', 'MovingAverage', '386', {'ns': [75], 'nl': [80]}], ['Tencent', 'MovingAverage', '700', {'ns': [20], 'nl': [30]}], ['ChinaUnicom', 'MovingAverage', '762', {'ns': [2], 'nl': [30]}], ['PetroChina', 'MovingAverage', '857', {'ns': [4], 'nl': [15]}], ['CNOOC', 'MovingAverage', '883', {'ns': [30], 'nl': [50]}], ['ChinaMobile', 'MovingAverage', '941', {'ns': [5], 'nl': [85]}], ['LenovoGroup', 'MovingAverage', '992', {'ns': [4], 'nl': [35]}], ['HenganIntl', 'MovingAverage', '1044', {'ns': [130], 'nl': [135]}], ['ChinaShenhua', 'MovingAverage', '1088', {'ns': [80], 'nl': [120]}], ['SandsChinaLtd', 'MovingAverage', '1928', {'ns': [65], 'nl': [230]}], ['AACTech', 'MovingAverage', '2018', {'ns': [185], 'nl': [205]}], ['MengniuDairy', 'MovingAverage', '2319', {'ns': [3], 'nl': [105]}], ['SunnyOptical', 'MovingAverage', '2382', {'ns': [105], 'nl': [155]}], ['HSBCHoldings', 'BollingerBandsStrategy', '5', {'k': [2.2], 'n': [10]}], ['HangSengBank', 'BollingerBandsStrategy', '11', {'k': [2.5], 'n': [20]}], ['BankofEAsia', 'BollingerBandsStrategy', '23', {'k': [2.1], 'n': [130]}], ['HKEx', 'BollingerBandsStrategy', '388', {'k': [2.3], 'n': [140]}], ['CCB', 'BollingerBandsStrategy', '939', {'k': [2.3], 'n': [170]}], ['AIA', 'BollingerBandsStrategy', '1299', {'k': [2.3], 'n': [120]}], ['ICBC', 'BollingerBandsStrategy', '1398', {'k': [2.3], 'n': [170]}], ['PingAn', 'BollingerBandsStrategy', '2318', {'k': [1.9], 'n': [200]}], ['BOCHongKong', 'BollingerBandsStrategy', '2388', {'k': [2.1], 'n': [180]}], ['ChinaLife', 'BollingerBandsStrategy', '2628', {'k': [2.5], 'n': [175]}], ['Bankcomm', 'BollingerBandsStrategy', '3328', {'k': [2.3], 'n': [45]}], ['BankofChina', 'BollingerBandsStrategy', '3988', {'k': [2.1], 'n': [165]}], ['CLPHoldings', 'BollingerBandsStrategy', '2', {'k': [2.0], 'n': [35]}], ['HK&ChinaGas', 'BollingerBandsStrategy', '3', {'k': [2.5], 'n': [140]}], ['PowerAssets', 'BollingerBandsStrategy', '6', {'k': [1.5], 'n': [115]}], ['ChinaResPower', 'BollingerBandsStrategy', '836', {'k': [1.5], 'n': [70]}], ['CKIHoldings', 'BollingerBandsStrategy', '1038', {'k': [2.5], 'n': [115]}], ['HendersonLand', 'BollingerBandsStrategy', '12', {'k': [2.4], 'n': [15]}], ['SHKPpt', 'BollingerBandsStrategy', '16', {'k': [2.3], 'n': [15]}], ['NewWorldDev', 'BollingerBandsStrategy', '17', {'k': [2.5], 'n': [120]}], ['SinoLand', 'BollingerBandsStrategy', '83', {'k': [2.1], 'n': [70]}], ['HangLungPpt', 'BollingerBandsStrategy', '101', {'k': [2.2], 'n': [170]}], ['ChinaOverseas', 'BollingerBandsStrategy', '688', {'k': [1.9], 'n': [170]}], ['LinkREIT', 'BollingerBandsStrategy', '823', {'k': [2.5], 'n': [85]}], ['ChinaResLand', 'BollingerBandsStrategy', '1109', {'k': [1.9], 'n': [210]}], ['CKAsset', 'BollingerBandsStrategy', '1113', {'k': [2.2], 'n': [165]}], ['CountryGarden', 'BollingerBandsStrategy', '2007', {'k': [1.5], 'n': [220]}], ['CKHHoldings', 'BollingerBandsStrategy', '1', {'k': [2.5], 'n': [85]}], ['SwirePacificA', 'BollingerBandsStrategy', '19', {'k': [2.5], 'n': [95]}], ['GalaxyEnt', 'BollingerBandsStrategy', '27', {'k': [2.5], 'n': [180]}], ['MTRCorporation', 'BollingerBandsStrategy', '66', {'k': [2.2], 'n': [10]}], ['ChinaMerPort', 'BollingerBandsStrategy', '144', {'k': [2.0], 'n': [10]}], ['WantWantChina', 'BollingerBandsStrategy', '151', {'k': [1.6], 'n': [15]}], ['GeelyAuto', 'BollingerBandsStrategy', '175', {'k': [2.4], 'n': [145]}], ['CITIC', 'BollingerBandsStrategy', '267', {'k': [1.7], 'n': [95]}], ['WHGroup', 'BollingerBandsStrategy', '288', {'k': [1.5], 'n': [240]}], ['SinopecCorp', 'BollingerBandsStrategy', '386', {'k': [1.5], 'n': [10]}], ['Tencent', 'BollingerBandsStrategy', '700', {'k': [2.5], 'n': [120]}], ['ChinaUnicom', 'BollingerBandsStrategy', '762', {'k': [2.0], 'n': [165]}], ['PetroChina', 'BollingerBandsStrategy', '857', {'k': [2.5], 'n': [135]}], ['CNOOC', 'BollingerBandsStrategy', '883', {'k': [2.5], 'n': [120]}], ['ChinaMobile', 'BollingerBandsStrategy', '941', {'k': [2.1], 'n': [175]}], ['LenovoGroup', 'BollingerBandsStrategy', '992', {'k': [2.2], 'n': [65]}], ['HenganIntl', 'BollingerBandsStrategy', '1044', {'k': [1.9], 'n': [20]}], ['ChinaShenhua', 'BollingerBandsStrategy', '1088', {'k': [1.9], 'n': [20]}], ['SandsChinaLtd', 'BollingerBandsStrategy', '1928', {'k': [2.5], 'n': [40]}], ['AACTech', 'BollingerBandsStrategy', '2018', {'k': [1.7], 'n': [85]}], ['MengniuDairy', 'BollingerBandsStrategy', '2319', {'k': [2.4], 'n': [250]}], ['SunnyOptical', 'BollingerBandsStrategy', '2382', {'k': [2.4], 'n': [70]}], ['HSBCHoldings', 'MacdHistogram', '5', {'ns': [8], 'nl': [24], 'time': [8]}], ['HangSengBank', 'MacdHistogram', '11', {'ns': [8], 'nl': [36], 'time': [8]}], ['BankofEAsia', 'MacdHistogram', '23', {'ns': [8], 'nl': [32], 'time': [8]}], ['HKEx', 'MacdHistogram', '388', {'ns': [8], 'nl': [38], 'time': [9]}], ['CCB', 'MacdHistogram', '939', {'ns': [8], 'nl': [28], 'time': [9]}], ['AIA', 'MacdHistogram', '1299', {'ns': [8], 'nl': [30], 'time': [8]}], ['ICBC', 'MacdHistogram', '1398', {'ns': [9], 'nl': [26], 'time': [9]}], ['PingAn', 'MacdHistogram', '2318', {'ns': [8], 'nl': [26], 'time': [8]}], ['BOCHongKong', 'MacdHistogram', '2388', {'ns': [8], 'nl': [38], 'time': [10]}], ['ChinaLife', 'MacdHistogram', '2628', {'ns': [8], 'nl': [28], 'time': [8]}], ['Bankcomm', 'MacdHistogram', '3328', {'ns': [8], 'nl': [28], 'time': [8]}], ['BankofChina', 'MacdHistogram', '3988', {'ns': [8], 'nl': [24], 'time': [8]}], ['CLPHoldings', 'MacdHistogram', '2', {'ns': [8], 'nl': [26], 'time': [8]}], ['HK&ChinaGas', 'MacdHistogram', '3', {'ns': [8], 'nl': [30], 'time': [8]}], ['PowerAssets', 'MacdHistogram', '6', {'ns': [8], 'nl': [24], 'time': [8]}], ['ChinaResPower', 'MacdHistogram', '836', {'ns': [8], 'nl': [24], 'time': [8]}], ['CKIHoldings', 'MacdHistogram', '1038', {'ns': [10], 'nl': [24], 'time': [8]}], ['HendersonLand', 'MacdHistogram', '12', {'ns': [9], 'nl': [26], 'time': [8]}], ['SHKPpt', 'MacdHistogram', '16', {'ns': [8], 'nl': [24], 'time': [8]}], ['NewWorldDev', 'MacdHistogram', '17', {'ns': [8], 'nl': [26], 'time': [8]}], ['SinoLand', 'MacdHistogram', '83', {'ns': [8], 'nl': [30], 'time': [8]}], ['HangLungPpt', 'MacdHistogram', '101', {'ns': [8], 'nl': [36], 'time': [8]}], ['ChinaOverseas', 'MacdHistogram', '688', {'ns': [8], 'nl': [30], 'time': [8]}], ['LinkREIT', 'MacdHistogram', '823', {'ns': [8], 'nl': [32], 'time': [9]}], ['ChinaResLand', 'MacdHistogram', '1109', {'ns': [8], 'nl': [24], 'time': [8]}], ['CKAsset', 'MacdHistogram', '1113', {'ns': [9], 'nl': [28], 'time': [11]}], ['CountryGarden', 'MacdHistogram', '2007', {'ns': [8], 'nl': [24], 'time': [8]}], ['CKHHoldings', 'MacdHistogram', '1', {'ns': [8], 'nl': [24], 'time': [8]}], ['SwirePacificA', 'MacdHistogram', '19', {'ns': [8], 'nl': [24], 'time': [8]}], ['GalaxyEnt', 'MacdHistogram', '27', {'ns': [8], 'nl': [26], 'time': [8]}], ['MTRCorporation', 'MacdHistogram', '66', {'ns': [8], 'nl': [34], 'time': [9]}], ['ChinaMerPort', 'MacdHistogram', '144', {'ns': [12], 'nl': [34], 'time': [9]}], ['WantWantChina', 'MacdHistogram', '151', {'ns': [8], 'nl': [38], 'time': [9]}], ['GeelyAuto', 'MacdHistogram', '175', {'ns': [8], 'nl': [30], 'time': [9]}], ['CITIC', 'MacdHistogram', '267', {'ns': [8], 'nl': [28], 'time': [8]}], ['WHGroup', 'MacdHistogram', '288', {'ns': [8], 'nl': [24], 'time': [9]}], ['SinopecCorp', 'MacdHistogram', '386', {'ns': [8], 'nl': [26], 'time': [8]}], ['Tencent', 'MacdHistogram', '700', {'ns': [13], 'nl': [34], 'time': [9]}], ['ChinaUnicom', 'MacdHistogram', '762', {'ns': [8], 'nl': [38], 'time': [8]}], ['PetroChina', 'MacdHistogram', '857', {'ns': [9], 'nl': [24], 'time': [8]}], ['CNOOC', 'MacdHistogram', '883', {'ns': [8], 'nl': [26], 'time': [8]}], ['ChinaMobile', 'MacdHistogram', '941', {'ns': [8], 'nl': [30], 'time': [8]}], ['LenovoGroup', 'MacdHistogram', '992', {'ns': [8], 'nl': [38], 'time': [8]}], ['HenganIntl', 'MacdHistogram', '1044', {'ns': [8], 'nl': [24], 'time': [8]}], ['ChinaShenhua', 'MacdHistogram', '1088', {'ns': [8], 'nl': [34], 'time': [8]}], ['SandsChinaLtd', 'MacdHistogram', '1928', {'ns': [8], 'nl': [24], 'time': [8]}], ['AACTech', 'MacdHistogram', '2018', {'ns': [8], 'nl': [24], 'time': [8]}], ['MengniuDairy', 'MacdHistogram', '2319', {'ns': [8], 'nl': [32], 'time': [9]}], ['SunnyOptical', 'MacdHistogram', '2382', {'ns': [8], 'nl': [24], 'time': [8]}], ['HSBCHoldings', 'RelativeStrengthIndex', '5', {'os': [14], 'ob': [89], 'n': [10]}], ['HangSengBank', 'RelativeStrengthIndex', '11', {'os': [30], 'ob': [74], 'n': [10]}], ['BankofEAsia', 'RelativeStrengthIndex', '23', {'os': [27], 'ob': [93], 'n': [10]}], ['HKEx', 'RelativeStrengthIndex', '388', {'os': [30], 'ob': [70], 'n': [11]}], ['CCB', 'RelativeStrengthIndex', '939', {'os': [22], 'ob': [94], 'n': [12]}], ['AIA', 'RelativeStrengthIndex', '1299', {'os': [30], 'ob': [90], 'n': [16]}], ['ICBC', 'RelativeStrengthIndex', '1398', {'os': [31], 'ob': [72], 'n': [20]}], ['PingAn', 'RelativeStrengthIndex', '2318', {'os': [30], 'ob': [84], 'n': [11]}], ['BOCHongKong', 'RelativeStrengthIndex', '2388', {'os': [25], 'ob': [88], 'n': [15]}], ['ChinaLife', 'RelativeStrengthIndex', '2628', {'os': [31], 'ob': [73], 'n': [18]}], ['Bankcomm', 'RelativeStrengthIndex', '3328', {'os': [27], 'ob': [88], 'n': [11]}], ['BankofChina', 'RelativeStrengthIndex', '3988', {'os': [21], 'ob': [75], 'n': [13]}], ['CLPHoldings', 'RelativeStrengthIndex', '2', {'os': [13], 'ob': [70], 'n': [30]}], ['HK&ChinaGas', 'RelativeStrengthIndex', '3', {'os': [28], 'ob': [83], 'n': [10]}], ['PowerAssets', 'RelativeStrengthIndex', '6', {'os': [24], 'ob': [82], 'n': [20]}], ['ChinaResPower', 'RelativeStrengthIndex', '836', {'os': [27], 'ob': [82], 'n': [26]}], ['CKIHoldings', 'RelativeStrengthIndex', '1038', {'os': [29], 'ob': [79], 'n': [29]}], ['HendersonLand', 'RelativeStrengthIndex', '12', {'os': [23], 'ob': [78], 'n': [13]}], ['SHKPpt', 'RelativeStrengthIndex', '16', {'os': [22], 'ob': [80], 'n': [10]}], ['NewWorldDev', 'RelativeStrengthIndex', '17', {'os': [24], 'ob': [83], 'n': [10]}], ['SinoLand', 'RelativeStrengthIndex', '83', {'os': [24], 'ob': [86], 'n': [30]}], ['HangLungPpt', 'RelativeStrengthIndex', '101', {'os': [24], 'ob': [84], 'n': [15]}], ['ChinaOverseas', 'RelativeStrengthIndex', '688', {'os': [10], 'ob': [81], 'n': [29]}], ['LinkREIT', 'RelativeStrengthIndex', '823', {'os': [22], 'ob': [71], 'n': [29]}], ['ChinaResLand', 'RelativeStrengthIndex', '1109', {'os': [14], 'ob': [87], 'n': [18]}], ['CKAsset', 'RelativeStrengthIndex', '1113', {'os': [30], 'ob': [76], 'n': [26]}], ['CountryGarden', 'RelativeStrengthIndex', '2007', {'os': [28], 'ob': [81], 'n': [21]}], ['CKHHoldings', 'RelativeStrengthIndex', '1', {'os': [22], 'ob': [83], 'n': [12]}], ['SwirePacificA', 'RelativeStrengthIndex', '19', {'os': [16], 'ob': [85], 'n': [10]}], ['GalaxyEnt', 'RelativeStrengthIndex', '27', {'os': [23], 'ob': [70], 'n': [11]}], ['MTRCorporation', 'RelativeStrengthIndex', '66', {'os': [27], 'ob': [92], 'n': [14]}], ['ChinaMerPort', 'RelativeStrengthIndex', '144', {'os': [17], 'ob': [84], 'n': [28]}], ['WantWantChina', 'RelativeStrengthIndex', '151', {'os': [23], 'ob': [87], 'n': [11]}], ['GeelyAuto', 'RelativeStrengthIndex', '175', {'os': [30], 'ob': [84], 'n': [11]}], ['CITIC', 'RelativeStrengthIndex', '267', {'os': [23], 'ob': [74], 'n': [18]}], ['WHGroup', 'RelativeStrengthIndex', '288', {'os': [31], 'ob': [78], 'n': [17]}], ['SinopecCorp', 'RelativeStrengthIndex', '386', {'os': [31], 'ob': [93], 'n': [22]}], ['Tencent', 'RelativeStrengthIndex', '700', {'os': [23], 'ob': [90], 'n': [20]}], ['ChinaUnicom', 'RelativeStrengthIndex', '762', {'os': [31], 'ob': [77], 'n': [14]}], ['PetroChina', 'RelativeStrengthIndex', '857', {'os': [30], 'ob': [94], 'n': [28]}], ['CNOOC', 'RelativeStrengthIndex', '883', {'os': [31], 'ob': [94], 'n': [10]}], ['ChinaMobile', 'RelativeStrengthIndex', '941', {'os': [31], 'ob': [73], 'n': [21]}], ['LenovoGroup', 'RelativeStrengthIndex', '992', {'os': [27], 'ob': [87], 'n': [14]}], ['HenganIntl', 'RelativeStrengthIndex', '1044', {'os': [29], 'ob': [95], 'n': [21]}], ['ChinaShenhua', 'RelativeStrengthIndex', '1088', {'os': [21], 'ob': [80], 'n': [18]}], ['SandsChinaLtd', 'RelativeStrengthIndex', '1928', {'os': [30], 'ob': [88], 'n': [11]}], ['AACTech', 'RelativeStrengthIndex', '2018', {'os': [30], 'ob': [91], 'n': [27]}], ['MengniuDairy', 'RelativeStrengthIndex', '2319', {'os': [23], 'ob': [89], 'n': [24]}], ['SunnyOptical', 'RelativeStrengthIndex', '2382', {'os': [31], 'ob': [76], 'n': [18]}], ['HSBCHoldings', 'MovingAverage', '5', {'ns': [165], 'nl': [205]}], ['HangSengBank', 'MovingAverage', '11', {'ns': [80], 'nl': [85]}], ['BankofEAsia', 'MovingAverage', '23', {'ns': [35], 'nl': [115]}], ['HKEx', 'MovingAverage', '388', {'ns': [30], 'nl': [35]}], ['CCB', 'MovingAverage', '939', {'ns': [6], 'nl': [35]}], ['AIA', 'MovingAverage', '1299', {'ns': [50], 'nl': [165]}], ['ICBC', 'MovingAverage', '1398', {'ns': [135], 'nl': [195]}], ['PingAn', 'MovingAverage', '2318', {'ns': [90], 'nl': [180]}], ['BOCHongKong', 'MovingAverage', '2388', {'ns': [155], 'nl': [170]}], ['ChinaLife', 'MovingAverage', '2628', {'ns': [25], 'nl': [35]}], ['Bankcomm', 'MovingAverage', '3328', {'ns': [3], 'nl': [30]}], ['BankofChina', 'MovingAverage', '3988', {'ns': [135], 'nl': [165]}], ['CLPHoldings', 'MovingAverage', '2', {'ns': [20], 'nl': [35]}], ['HK&ChinaGas', 'MovingAverage', '3', {'ns': [4], 'nl': [70]}], ['PowerAssets', 'MovingAverage', '6', {'ns': [50], 'nl': [60]}], ['ChinaResPower', 'MovingAverage', '836', {'ns': [95], 'nl': [160]}], ['CKIHoldings', 'MovingAverage', '1038', {'ns': [1], 'nl': [10]}], ['HendersonLand', 'MovingAverage', '12', {'ns': [15], 'nl': [105]}], ['SHKPpt', 'MovingAverage', '16', {'ns': [35], 'nl': [110]}], ['NewWorldDev', 'MovingAverage', '17', {'ns': [15], 'nl': [100]}], ['SinoLand', 'MovingAverage', '83', {'ns': [30], 'nl': [85]}], ['HangLungPpt', 'MovingAverage', '101', {'ns': [55], 'nl': [70]}], ['ChinaOverseas', 'MovingAverage', '688', {'ns': [5], 'nl': [70]}], ['LinkREIT', 'MovingAverage', '823', {'ns': [9], 'nl': [30]}], ['ChinaResLand', 'MovingAverage', '1109', {'ns': [190], 'nl': [205]}], ['CKAsset', 'MovingAverage', '1113', {'ns': [20], 'nl': [80]}], ['CountryGarden', 'MovingAverage', '2007', {'ns': [4], 'nl': [235]}], ['CKHHoldings', 'MovingAverage', '1', {'ns': [50], 'nl': [150]}], ['SwirePacificA', 'MovingAverage', '19', {'ns': [15], 'nl': [65]}], ['GalaxyEnt', 'MovingAverage', '27', {'ns': [15], 'nl': [45]}], ['MTRCorporation', 'MovingAverage', '66', {'ns': [55], 'nl': [60]}], ['ChinaMerPort', 'MovingAverage', '144', {'ns': [1], 'nl': [85]}], ['WantWantChina', 'MovingAverage', '151', {'ns': [30], 'nl': [90]}], ['GeelyAuto', 'MovingAverage', '175', {'ns': [195], 'nl': [200]}], ['CITIC', 'MovingAverage', '267', {'ns': [20], 'nl': [45]}], ['WHGroup', 'MovingAverage', '288', {'ns': [40], 'nl': [80]}], ['SinopecCorp', 'MovingAverage', '386', {'ns': [4], 'nl': [60]}], ['Tencent', 'MovingAverage', '700', {'ns': [85], 'nl': [110]}], ['ChinaUnicom', 'MovingAverage', '762', {'ns': [1], 'nl': [170]}], ['PetroChina', 'MovingAverage', '857', {'ns': [30], 'nl': [45]}], ['CNOOC', 'MovingAverage', '883', {'ns': [4], 'nl': [160]}], ['ChinaMobile', 'MovingAverage', '941', {'ns': [15], 'nl': [35]}], ['LenovoGroup', 'MovingAverage', '992', {'ns': [1], 'nl': [45]}], ['HenganIntl', 'MovingAverage', '1044', {'ns': [6], 'nl': [180]}], ['ChinaShenhua', 'MovingAverage', '1088', {'ns': [7], 'nl': [105]}], ['SandsChinaLtd', 'MovingAverage', '1928', {'ns': [40], 'nl': [65]}], ['AACTech', 'MovingAverage', '2018', {'ns': [6], 'nl': [65]}], ['MengniuDairy', 'MovingAverage', '2319', {'ns': [35], 'nl': [65]}], ['SunnyOptical', 'MovingAverage', '2382', {'ns': [45], 'nl': [55]}], ['HSBCHoldings', 'tradingRangeBreakout', '5', {'n': [30]}], ['HangSengBank', 'tradingRangeBreakout', '11', {'n': [10]}], ['BankofEAsia', 'tradingRangeBreakout', '23', {'n': [20]}], ['HKEx', 'tradingRangeBreakout', '388', {'n': [20]}], ['CCB', 'tradingRangeBreakout', '939', {'n': [20]}], ['AIA', 'tradingRangeBreakout', '1299', {'n': [30]}], ['ICBC', 'tradingRangeBreakout', '1398', {'n': [75]}], ['PingAn', 'tradingRangeBreakout', '2318', {'n': [20]}], ['BOCHongKong', 'tradingRangeBreakout', '2388', {'n': [50]}], ['ChinaLife', 'tradingRangeBreakout', '2628', {'n': [20]}], ['Bankcomm', 'tradingRangeBreakout', '3328', {'n': [70]}], ['BankofChina', 'tradingRangeBreakout', '3988', {'n': [100]}], ['CLPHoldings', 'tradingRangeBreakout', '2', {'n': [70]}], ['HK&ChinaGas', 'tradingRangeBreakout', '3', {'n': [30]}], ['PowerAssets', 'tradingRangeBreakout', '6', {'n': [50]}], ['ChinaResPower', 'tradingRangeBreakout', '836', {'n': [230]}], ['CKIHoldings', 'tradingRangeBreakout', '1038', {'n': [60]}], ['HendersonLand', 'tradingRangeBreakout', '12', {'n': [35]}], ['SHKPpt', 'tradingRangeBreakout', '16', {'n': [10]}], ['NewWorldDev', 'tradingRangeBreakout', '17', {'n': [25]}], ['SinoLand', 'tradingRangeBreakout', '83', {'n': [20]}], ['HangLungPpt', 'tradingRangeBreakout', '101', {'n': [55]}], ['ChinaOverseas', 'tradingRangeBreakout', '688', {'n': [40]}], ['LinkREIT', 'tradingRangeBreakout', '823', {'n': [35]}], ['ChinaResLand', 'tradingRangeBreakout', '1109', {'n': [55]}], ['CKAsset', 'tradingRangeBreakout', '1113', {'n': [10]}], ['CountryGarden', 'tradingRangeBreakout', '2007', {'n': [30]}], ['CKHHoldings', 'tradingRangeBreakout', '1', {'n': [35]}], ['SwirePacificA', 'tradingRangeBreakout', '19', {'n': [20]}], ['GalaxyEnt', 'tradingRangeBreakout', '27', {'n': [10]}], ['MTRCorporation', 'tradingRangeBreakout', '66', {'n': [70]}], ['ChinaMerPort', 'tradingRangeBreakout', '144', {'n': [35]}], ['WantWantChina', 'tradingRangeBreakout', '151', {'n': [235]}], ['GeelyAuto', 'tradingRangeBreakout', '175', {'n': [15]}], ['CITIC', 'tradingRangeBreakout', '267', {'n': [10]}], ['WHGroup', 'tradingRangeBreakout', '288', {'n': [40]}], ['SinopecCorp', 'tradingRangeBreakout', '386', {'n': [35]}], ['Tencent', 'tradingRangeBreakout', '700', {'n': [20]}], ['ChinaUnicom', 'tradingRangeBreakout', '762', {'n': [15]}], ['PetroChina', 'tradingRangeBreakout', '857', {'n': [10]}], ['CNOOC', 'tradingRangeBreakout', '883', {'n': [50]}], ['ChinaMobile', 'tradingRangeBreakout', '941', {'n': [55]}], ['LenovoGroup', 'tradingRangeBreakout', '992', {'n': [30]}], ['HenganIntl', 'tradingRangeBreakout', '1044', {'n': [100]}], ['ChinaShenhua', 'tradingRangeBreakout', '1088', {'n': [80]}], ['SandsChinaLtd', 'tradingRangeBreakout', '1928', {'n': [10]}], ['AACTech', 'tradingRangeBreakout', '2018', {'n': [55]}], ['MengniuDairy', 'tradingRangeBreakout', '2319', {'n': [50]}], ['SunnyOptical', 'tradingRangeBreakout', '2382', {'n': [130]}], ['HSBCHoldings', 'StochasticOscillator', '5', {'m': [6], 'os': [20], 'ob': [83], 'n': [13]}], ['HangSengBank', 'StochasticOscillator', '11', {'m': [7], 'os': [22], 'ob': [92], 'n': [30]}], ['BankofEAsia', 'StochasticOscillator', '23', {'m': [9], 'os': [13], 'ob': [80], 'n': [45]}], ['HKEx', 'StochasticOscillator', '388', {'m': [8], 'os': [25], 'ob': [91], 'n': [50]}], ['CCB', 'StochasticOscillator', '939', {'m': [11], 'os': [17], 'ob': [90], 'n': [160]}], ['AIA', 'StochasticOscillator', '1299', {'m': [7], 'os': [10], 'ob': [91], 'n': [70]}], ['ICBC', 'StochasticOscillator', '1398', {'m': [9], 'os': [12], 'ob': [93], 'n': [165]}], ['PingAn', 'StochasticOscillator', '2318', {'m': [8], 'os': [27], 'ob': [95], 'n': [180]}], ['BOCHongKong', 'StochasticOscillator', '2388', {'m': [8], 'os': [16], 'ob': [92], 'n': [10]}], ['ChinaLife', 'StochasticOscillator', '2628', {'m': [8], 'os': [17], 'ob': [89], 'n': [15]}], ['Bankcomm', 'StochasticOscillator', '3328', {'m': [9], 'os': [27], 'ob': [94], 'n': [180]}], ['BankofChina', 'StochasticOscillator', '3988', {'m': [7], 'os': [10], 'ob': [94], 'n': [14]}], ['CLPHoldings', 'StochasticOscillator', '2', {'m': [6], 'os': [31], 'ob': [95], 'n': [6]}], ['HK&ChinaGas', 'StochasticOscillator', '3', {'m': [5], 'os': [20], 'ob': [89], 'n': [135]}], ['PowerAssets', 'StochasticOscillator', '6', {'m': [3], 'os': [24], 'ob': [75], 'n': [135]}], ['ChinaResPower', 'StochasticOscillator', '836', {'m': [4], 'os': [30], 'ob': [72], 'n': [6]}], ['CKIHoldings', 'StochasticOscillator', '1038', {'m': [7], 'os': [28], 'ob': [95], 'n': [145]}], ['HendersonLand', 'StochasticOscillator', '12', {'m': [5], 'os': [16], 'ob': [90], 'n': [45]}], ['SHKPpt', 'StochasticOscillator', '16', {'m': [11], 'os': [11], 'ob': [77], 'n': [20]}], ['NewWorldDev', 'StochasticOscillator', '17', {'m': [8], 'os': [11], 'ob': [84], 'n': [160]}], ['SinoLand', 'StochasticOscillator', '83', {'m': [4], 'os': [11], 'ob': [87], 'n': [40]}], ['HangLungPpt', 'StochasticOscillator', '101', {'m': [10], 'os': [23], 'ob': [74], 'n': [160]}], ['ChinaOverseas', 'StochasticOscillator', '688', {'m': [4], 'os': [27], 'ob': [72], 'n': [60]}], ['LinkREIT', 'StochasticOscillator', '823', {'m': [10], 'os': [22], 'ob': [92], 'n': [11]}], ['ChinaResLand', 'StochasticOscillator', '1109', {'m': [3], 'os': [12], 'ob': [95], 'n': [185]}], ['CKAsset', 'StochasticOscillator', '1113', {'m': [8], 'os': [10], 'ob': [83], 'n': [11]}], ['CountryGarden', 'StochasticOscillator', '2007', {'m': [4], 'os': [18], 'ob': [93], 'n': [190]}], ['CKHHoldings', 'StochasticOscillator', '1', {'m': [9], 'os': [19], 'ob': [82], 'n': [11]}], ['SwirePacificA', 'StochasticOscillator', '19', {'m': [9], 'os': [11], 'ob': [82], 'n': [13]}], ['GalaxyEnt', 'StochasticOscillator', '27', {'m': [4], 'os': [10], 'ob': [74], 'n': [14]}], ['MTRCorporation', 'StochasticOscillator', '66', {'m': [8], 'os': [18], 'ob': [95], 'n': [8]}], ['ChinaMerPort', 'StochasticOscillator', '144', {'m': [6], 'os': [10], 'ob': [85], 'n': [35]}], ['WantWantChina', 'StochasticOscillator', '151', {'m': [3], 'os': [24], 'ob': [71], 'n': [8]}], ['GeelyAuto', 'StochasticOscillator', '175', {'m': [7], 'os': [30], 'ob': [86], 'n': [160]}], ['CITIC', 'StochasticOscillator', '267', {'m': [5], 'os': [17], 'ob': [79], 'n': [90]}], ['WHGroup', 'StochasticOscillator', '288', {'m': [7], 'os': [20], 'ob': [94], 'n': [85]}], ['SinopecCorp', 'StochasticOscillator', '386', {'m': [3], 'os': [20], 'ob': [91], 'n': [20]}], ['Tencent', 'StochasticOscillator', '700', {'m': [3], 'os': [26], 'ob': [94], 'n': [11]}], ['ChinaUnicom', 'StochasticOscillator', '762', {'m': [4], 'os': [10], 'ob': [85], 'n': [165]}], ['PetroChina', 'StochasticOscillator', '857', {'m': [7], 'os': [10], 'ob': [87], 'n': [8]}], ['CNOOC', 'StochasticOscillator', '883', {'m': [10], 'os': [20], 'ob': [78], 'n': [145]}], ['ChinaMobile', 'StochasticOscillator', '941', {'m': [7], 'os': [10], 'ob': [91], 'n': [165]}], ['LenovoGroup', 'StochasticOscillator', '992', {'m': [5], 'os': [24], 'ob': [78], 'n': [10]}], ['HenganIntl', 'StochasticOscillator', '1044', {'m': [3], 'os': [17], 'ob': [87], 'n': [14]}], ['ChinaShenhua', 'StochasticOscillator', '1088', {'m': [9], 'os': [14], 'ob': [73], 'n': [25]}], ['SandsChinaLtd', 'StochasticOscillator', '1928', {'m': [6], 'os': [14], 'ob': [76], 'n': [12]}], ['AACTech', 'StochasticOscillator', '2018', {'m': [5], 'os': [15], 'ob': [94], 'n': [70]}], ['MengniuDairy', 'StochasticOscillator', '2319', {'m': [11], 'os': [12], 'ob': [81], 'n': [145]}], ['SunnyOptical', 'StochasticOscillator', '2382', {'m': [3], 'os': [21], 'ob': [95], 'n': [55]}]]
	# testList = [['ChinaMobile', 'tradingRangeBreakout', '941', {'n': [55]}], ['LenovoGroup', 'tradingRangeBreakout', '992', {'n': [30]}]]
	bf = Bruteforce()
	fileObject = open('outsamplePso', 'w+')	
	for test in testList:
		bf.setStockDataTime(test[2], '2016-12-13', '2018-08-15')
		bf.setStrategy(test[1], test[3])
		bStratRes, bBstRes = bf.run()
		# print bBstRes
		record = str(test[0]) + '\t' + str(test[2]) + '\t' + str(test[1]) + '\t'+ str(bBstRes[0]) + '\t' + str(bBstRes[1]) + '\n'  
		fileObject.write(record)
	fileObject.close()	

def randomPickParameter():
	codeName = {'5': 'HSBCHoldings', '11': 'HangSengBank', '23': 'BankofEAsia', '388': 'HKEx', '939': 'CCB', '1299': 'AIA', '1398': 'ICBC', '2318': 'PingAn', '2388': 'BOCHongKong', '2628': 'ChinaLife', '3328': 'Bankcomm', '3988': 'BankofChina', '2': 'CLPHoldings', '3': 'HK&ChinaGas', '6': 'PowerAssets', '836': 'ChinaResPower', '1038': 'CKIHoldings', '12': 'HendersonLand', '16': 'SHKPpt', '17': 'NewWorldDev', '83': 'SinoLand', '101': 'HangLungPpt', '688': 'ChinaOverseas', '823': 'LinkREIT', '1109': 'ChinaResLand', '1113': 'CKAsset', '2007': 'CountryGarden', '1': 'CKHHoldings', '19': 'SwirePacificA', '27': 'GalaxyEnt', '66': 'MTRCorporation', '144': 'ChinaMerPort', '151': 'WantWantChina', '175': 'GeelyAuto', '267': 'CITIC', '288': 'WHGroup', '386': 'SinopecCorp', '700': 'Tencent', '762': 'ChinaUnicom', '857': 'PetroChina', '883': 'CNOOC', '941': 'ChinaMobile', '992': 'LenovoGroup', '1044': 'HenganIntl', '1088': 'ChinaShenhua', '1928': 'SandsChinaLtd', '2018': 'AACTech', '2319': 'MengniuDairy', '2382': 'SunnyOptical'}	
	allStrategy = ['MovingAverage', 'BollingerBandsStrategy', 'MacdHistogram', 'RelativeStrengthIndex', 'OnBalanceVolAve', 'tradingRangeBreakout','StochasticOscillator']
	# allStrategy = ['RelativeStrengthIndex']
	bf = Bruteforce()
	
	fileObject = open('randomPickResult', 'w+')	
		
	for strategy in allStrategy:
		module = importlib.import_module(strategy)
		class_ = getattr(module, strategy)
		strategyClass = class_()
		paramerList = strategyClass.defaultParam()
		for code in codeName.keys():
			bestParameter = {}
			bestRoi = -99999
			bf.setStockDataTime(code, '2013-07-13', '2016-12-12')
			print code
			for i in range(280):
				param = {}
				for key in paramerList.keys():
					param[key] = [paramerList[key][random.randint(0,len(paramerList[key])-1)]]
				bf.setStrategy(strategy, param)
				bStratRes, bBstRes = bf.run()
				if bBstRes[1] > bestRoi:
					bestRoi = bBstRes[1]
					bestParameter = param

			record = str(codeName[code]) + '\t' + str(strategy) + '\t' + str(bestParameter) + '\t'+ str(bestRoi)+ '\n'
			print record
			fileObject.write(record)
	fileObject.close()	

def simpleRandomParameter():
	codeName = {'5': 'HSBCHoldings', '11': 'HangSengBank', '23': 'BankofEAsia', '388': 'HKEx', '939': 'CCB', '1299': 'AIA', '1398': 'ICBC', '2318': 'PingAn', '2388': 'BOCHongKong', '2628': 'ChinaLife', '3328': 'Bankcomm', '3988': 'BankofChina', '2': 'CLPHoldings', '3': 'HK&ChinaGas', '6': 'PowerAssets', '836': 'ChinaResPower', '1038': 'CKIHoldings', '12': 'HendersonLand', '16': 'SHKPpt', '17': 'NewWorldDev', '83': 'SinoLand', '101': 'HangLungPpt', '688': 'ChinaOverseas', '823': 'LinkREIT', '1109': 'ChinaResLand', '1113': 'CKAsset', '2007': 'CountryGarden', '1': 'CKHHoldings', '19': 'SwirePacificA', '27': 'GalaxyEnt', '66': 'MTRCorporation', '144': 'ChinaMerPort', '151': 'WantWantChina', '175': 'GeelyAuto', '267': 'CITIC', '288': 'WHGroup', '386': 'SinopecCorp', '700': 'Tencent', '762': 'ChinaUnicom', '857': 'PetroChina', '883': 'CNOOC', '941': 'ChinaMobile', '992': 'LenovoGroup', '1044': 'HenganIntl', '1088': 'ChinaShenhua', '1928': 'SandsChinaLtd', '2018': 'AACTech', '2319': 'MengniuDairy', '2382': 'SunnyOptical'}	
	allStrategy = ['MovingAverage', 'BollingerBandsStrategy', 'MacdHistogram', 'RelativeStrengthIndex', 'OnBalanceVolAve', 'tradingRangeBreakout','StochasticOscillator']
	bf = Bruteforce()
	# codeName = {'2018':'AACTech'}
	fileObject = open('randomSimplePickResult', 'w+')		
	for strategy in allStrategy:
		# import time
		# start = time.time()
		module = importlib.import_module(strategy)
		class_ = getattr(module, strategy)
		strategyClass = class_()
		paramerList = strategyClass.defaultParam()
		
		for code in codeName.keys():
			bestParameter = {}
			bestRoi = -99999
			bf.setStockDataTime(code, '2013-07-13', '2016-12-12')
			
			for i in range(3800000):
				param = {}
				for key in paramerList.keys():
					param[key] = []
				for key in paramerList.keys():
					param[key].append(paramerList[key][random.randint(0,len(paramerList[key])-1)])
			bf.setStrategy(strategy, param)
			# end = time.time()
			# escape = end - start
			# print escape
			
			
			bStratRes, bBstRes = bf.run()
			# print bBstRes
			record = str(codeName[code]) + '\t' + str(strategy) + '\t' + str(bBstRes[0]) + '\t'+ str(bBstRes[1])+ '\n'
			# print record
			fileObject.write(record)	
		
	fileObject.close()	



if __name__=="__main__":
	# testPSOParticularPara()
	simpleRandomParameter()
	# # bf.setStrategy("MacdHistogram")
	# # bf.setStrategy("MovingAverage")
	# # bf.setStrategy("MovingAveConvergeDiver")
	# # bf.setStrategy("BollingerBandsStrategy")
	# # bf.setStrategy("StochasticOscillator")
	# # bf.setStrategy("MovingMomentum")
	# brustForceOne()
	# ususallSeen()
	# bf.setStrategy("MacdHistogram", bBstRes[0])
	# bf.setStrategy("StochasticOscillator", bBstRes[0])

	# bf = Bruteforce()
	# #use the parameter to run in the outsample
	# # 2015-2017
	# # outsample = [{'code':'2382','parma':{'ns': [8], 'nl': [28], 'time': [8]}},{'code':'388','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'2318','parma':{'ns': [9], 'nl': [28], 'time': [10]}},{'code':'700','parma':{'ns': [18], 'nl': [32], 'time': [9]}},{'code':'175','parma':{'ns': [8], 'nl': [28], 'time': [8]}}]
	# # 2017-2018
	# outsample = [{'code':'175','parma':{'ns': [8], 'nl': [28], 'time': [8]}},{'code':'2382','parma':{'ns': [8], 'nl': [34], 'time': [8]}},{'code':'2007','parma':{'ns': [8], 'nl': [24], 'time': [9]}},{'code':'2018','parma':{'ns': [9], 'nl': [38], 'time': [8]}},{'code':'27','parma':{'ns': [8], 'nl': [24], 'time': [8]}}]
	# # outsample = [{'code':'2382','parma':{'ns': [8], 'nl': [32], 'time': [8]}},{'code':'175','parma':{'ns': [8], 'nl': [36], 'time': [8]}},{'code':'2018','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'1928','parma':{'ns': [8], 'nl': [24], 'time': [9]}},{'code':'2318','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'27','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'1109','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'2007','parma':{'ns': [8], 'nl': [24], 'time': [9]}},{'code':'700','parma':{'ns': [8], 'nl': [30], 'time': [8]}},{'code':'388','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'2628','parma':{'ns': [8], 'nl': [28], 'time': [8]}},{'code':'3328','parma':{'ns': [8], 'nl': [30], 'time': [8]}},{'code':'762','parma':{'ns': [8], 'nl': [32], 'time': [8]}},{'code':'267','parma':{'ns': [8], 'nl': [28], 'time': [8]}},{'code':'883','parma':{'ns': [8], 'nl': [30], 'time': [8]}},{'code':'688','parma':{'ns': [9], 'nl': [24], 'time': [8]}},{'code':'836','parma':{'ns': [8], 'nl': [24], 'time': [9]}},{'code':'386','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'2319','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'1088','parma':{'ns': [8], 'nl': [28], 'time': [8]}},{'code':'83','parma':{'ns': [8], 'nl': [30], 'time': [8]}},{'code':'992','parma':{'ns': [17], 'nl': [32], 'time': [8]}},{'code':'939','parma':{'ns': [8], 'nl': [28], 'time': [9]}},{'code':'17','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'3988','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'2388','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'12','parma':{'ns': [8], 'nl': [26], 'time': [9]}},{'code':'288','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'1','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'823','parma':{'ns': [8], 'nl': [30], 'time': [8]}},{'code':'857','parma':{'ns': [8], 'nl': [30], 'time': [8]}},{'code':'941','parma':{'ns': [9], 'nl': [30], 'time': [8]}},{'code':'1299','parma':{'ns': [8], 'nl': [32], 'time': [8]}},{'code':'1398','parma':{'ns': [8], 'nl': [32], 'time': [8]}},{'code':'23','parma':{'ns': [8], 'nl': [30], 'time': [10]}},{'code':'16','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'101','parma':{'ns': [8], 'nl': [36], 'time': [8]}},{'code':'144','parma':{'ns': [8], 'nl': [32], 'time': [8]}},{'code':'6','parma':{'ns': [8], 'nl': [24], 'time': [9]}},{'code':'5','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'151','parma':{'ns': [8], 'nl': [32], 'time': [8]}},{'code':'11','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'66','parma':{'ns': [8], 'nl': [36], 'time': [8]}},{'code':'1044','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'19','parma':{'ns': [8], 'nl': [24], 'time': [8]}},{'code':'1038','parma':{'ns': [9], 'nl': [24], 'time': [8]}},{'code':'2','parma':{'ns': [8], 'nl': [26], 'time': [8]}},{'code':'3','parma':{'ns': [8], 'nl': [24], 'time': [9]}},{'code':'1113','parma':{'ns': [8], 'nl': [28], 'time': [12]}}]
	# for code in outsample:
	# 	# print code
	# 	# bf.setStockDataTime(code.get('code'), '2015-07-15', '2017-07-15')
	# 	bf.setStockDataTime(code.get('code'), '2017-07-15', '2018-08-15')
	# 	bf.setStrategy("MacdHistogram", code.get('parma'))
	# 	bStratRes, bBstRes = bf.run()
	# 	print  bBstRes
	# bf = Bruteforce()
	# bf.setStockData("2382", True)
	# bf.setStrategy("MovingAverage")
	# ususallSeen()
	# testParticularPara()
	# randomPickParameter()
	# bParam = {'snl': [40], 'hnl': [36], 'sto_n': [18], 'hns': [10], 'sto_ob': [80], 'sns': [35], 'sto_os': [30], 'sto_m': [7], 'htime': [8]}
	# bParam = {'snl': [40], 'hnl': [26], 'sto_n': [13], 'hns': [8], 'sto_ob': [80], 'sns': [35], 'sto_os': [20], 'sto_m': [3], 'htime': [9]}
	# bParam = {'ns': [8], 'nl': [32], 'time': [8]}
	# bf.setStrategy("MacdHistogram", bParam)

	